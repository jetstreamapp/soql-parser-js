/*! For license information please see 252.e67654b4.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[252],{6252:(e,t,r)=>{function i(e){return(e=Array.isArray(e)?e[0]:e).image&&!0}function n(e){return"string"==typeof e}function a(e){return Number.isFinite(e)}function s(e){return null==e}function o(e,t,r){return s(e)?"":`${r||""}${e}${t||""}`}function l(e){return e.parameters&&0!==e.parameters.length?function(e){return!!e&&e.every(e=>n(e))}(e.parameters)?e.parameters:n(e.parameters[0])?[e.parameters[0]]:l(e.parameters[0]):[]}function c(e){return e&&!s(e.alias)}function u(e){return n(e.relationshipName)}function h(e){return!!e&&!!e.type&&"FieldSubquery"===e.type}function p(e){return!!e&&!!e.operator&&!!e.right}function f(e){return!!e&&!!e.operator&&!!e.right}function d(e){return!!e&&!!e.operator&&!!e.right}function E(e){return e&&n(e.field)&&n(e.operator)&&!s(e.value)}function T(e){return e&&n(e.field)&&n(e.operator)&&!s(e.value)&&("DATE_LITERAL"===e.literalType||Array.isArray(e.literalType)&&"DATE_LITERAL"===e.literalType[0])}function A(e){return e&&n(e.field)&&n(e.operator)&&!s(e.value)&&!s(e.dateLiteralVariable)}function m(e){return e&&!s(e.fn)&&n(e.operator)&&!s(e.value)}function g(e){return e&&a(e.openParen)&&s(e.operator)&&s(e.field)&&s(e.fn)&&s(e.closeParen)}function L(e){return e&&n(e.field)&&n(e.operator)&&!s(e.valueQuery)&&s(e.value)}function N(e){return e&&!s(e.field)}function S(e){return e&&!s(e.fn)}function _(e){return e&&!s(e.field)}function O(e){return e&&!s(e.fn)}function R(e,t,r){if(s(t))return e;if(r&&"APEX_BIND_VARIABLE"!==t&&function(e){return["IN","NOT IN","INCLUDES","EXCLUDES"].includes(e)}(r)&&!Array.isArray(e)&&(e=[e],t=Array.isArray(t)?t:[t]),Array.isArray(t)&&Array.isArray(e))return e.map((e,r)=>function(e,t){if("STRING"===t)return n(e)&&e.startsWith("'")?e:`'${e??""}'`;return e}(e,t?.[r]));switch(Array.isArray(t)&&(t=t[0]),t){case"STRING":return Array.isArray(e)?e.filter(Boolean).map(e=>n(e)&&e.startsWith("'")?e:`'${e??""}'`):n(e=String(e??""))&&e.startsWith("'")?e:`'${e??""}'`;case"APEX_BIND_VARIABLE":return`:${e}`;default:return e}}r.d(t,{A3:()=>A,H8:()=>u,K7:()=>T,Nw:()=>O,PS:()=>m,Qm:()=>S,T$:()=>c,TA:()=>L,VI:()=>Dp,WP:()=>p,Z1:()=>$p,ZC:()=>h,aV:()=>d,eb:()=>E,ev:()=>N,jO:()=>_,mA:()=>Bp,su:()=>f,tO:()=>Gp});var y="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,I=y||v||Function("return this")(),C=I.Symbol,x=Object.prototype,U=x.hasOwnProperty,b=x.toString,M=C?C.toStringTag:void 0;var k=function(e){var t=U.call(e,M),r=e[M];try{e[M]=void 0;var i=!0}catch{}var n=b.call(e);return i&&(t?e[M]=r:delete e[M]),n},P=Object.prototype.toString;var F=function(e){return P.call(e)},w=C?C.toStringTag:void 0;var B=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?k(e):F(e)};var D=function(e){return null!=e&&"object"==typeof e};var $=function(e){return"symbol"==typeof e||D(e)&&"[object Symbol]"==B(e)};var j=function(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n},G=Array.isArray,V=1/0,Y=C?C.prototype:void 0,W=Y?Y.toString:void 0;var H=function e(t){if("string"==typeof t)return t;if(G(t))return j(t,e)+"";if($(t))return W?W.call(t):"";var r=t+"";return"0"==r&&1/t==-V?"-0":r},K=/\s/;var X=function(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t},z=/^\s+/;var Q=function(e){return e&&e.slice(0,X(e)+1).replace(z,"")};var q=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Z=/^[-+]0x[0-9a-f]+$/i,J=/^0b[01]+$/i,ee=/^0o[0-7]+$/i,te=parseInt;var re=function(e){if("number"==typeof e)return e;if($(e))return NaN;if(q(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=q(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Q(e);var r=J.test(e);return r||ee.test(e)?te(e.slice(2),r?2:8):Z.test(e)?NaN:+e},ie=1/0;var ne=function(e){return e?(e=re(e))===ie||e===-ie?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var ae=function(e){var t=ne(e),r=t%1;return t==t?r?t-r:t:0};var se=function(e){return e};var oe,le=function(e){if(!q(e))return!1;var t=B(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ce=I["__core-js_shared__"],ue=(oe=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"";var he=function(e){return!!ue&&ue in e},pe=Function.prototype.toString;var fe=function(e){if(null!=e){try{return pe.call(e)}catch{}try{return e+""}catch{}}return""},de=/^\[object .+?Constructor\]$/,Ee=Function.prototype,Te=Object.prototype,Ae=Ee.toString,me=Te.hasOwnProperty,ge=RegExp("^"+Ae.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Le=function(e){return!(!q(e)||he(e))&&(le(e)?ge:de).test(fe(e))};var Ne=function(e,t){return e?.[t]};var Se=function(e,t){var r=Ne(e,t);return Le(r)?r:void 0},_e=Se(I,"WeakMap"),Oe=Object.create,Re=function(){function e(){}return function(t){if(!q(t))return{};if(Oe)return Oe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ye=Re;var ve=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var Ie=function(){};var Ce=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t},xe=Date.now;var Ue=function(e){var t=0,r=0;return function(){var i=xe(),n=16-(i-r);if(r=i,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};var be=function(e){return function(){return e}},Me=function(){try{var e=Se(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ke=Me,Pe=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:be(t),writable:!0})}:se,Fe=Ue(Pe);var we=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););return e};var Be=function(e,t,r,i){for(var n=e.length,a=r+(i?1:-1);i?a--:++a<n;)if(t(e[a],a,e))return a;return-1};var De=function(e){return e!=e};var $e=function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1};var je=function(e,t,r){return t==t?$e(e,t,r):Be(e,De,r)};var Ge=function(e,t){return!!(null==e?0:e.length)&&je(e,t,0)>-1},Ve=/^(?:0|[1-9]\d*)$/;var Ye=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Ve.test(e))&&e>-1&&e%1==0&&e<t};var We=function(e,t,r){"__proto__"==t&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var He=function(e,t){return e===t||e!=e&&t!=t},Ke=Object.prototype.hasOwnProperty;var Xe=function(e,t,r){var i=e[t];(!Ke.call(e,t)||!He(i,r)||void 0===r&&!(t in e))&&We(e,t,r)};var ze=function(e,t,r,i){var n=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=i?i(r[o],e[o],o,r,e):void 0;void 0===l&&(l=e[o]),n?We(r,o,l):Xe(r,o,l)}return r},Qe=Math.max;var qe=function(e,t,r){return t=Qe(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=Qe(i.length-t,0),s=Array(a);++n<a;)s[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(s),ve(e,this,o)}};var Ze=function(e,t){return Fe(qe(e,t,se),e+"")};var Je=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var et=function(e){return null!=e&&Je(e.length)&&!le(e)};var tt=function(e,t,r){if(!q(r))return!1;var i=typeof t;return!!("number"==i?et(r)&&Ye(t,r.length):"string"==i&&t in r)&&He(r[t],e)};var rt=function(e){return Ze(function(t,r){var i=-1,n=r.length,a=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(n--,a):void 0,s&&tt(r[0],r[1],s)&&(a=n<3?void 0:a,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,a)}return t})},it=Object.prototype;var nt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||it)};var at=function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i};var st=function(e){return D(e)&&"[object Arguments]"==B(e)},ot=Object.prototype,lt=ot.hasOwnProperty,ct=ot.propertyIsEnumerable,ut=st(function(){return arguments}())?st:function(e){return D(e)&&lt.call(e,"callee")&&!ct.call(e,"callee")},ht=ut;var pt=function(){return!1},ft="object"==typeof exports&&exports&&!exports.nodeType&&exports,dt=ft&&"object"==typeof module&&module&&!module.nodeType&&module,Et=dt&&dt.exports===ft?I.Buffer:void 0,Tt=(Et?Et.isBuffer:void 0)||pt,At={};At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Arguments]"]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object Boolean]"]=At["[object DataView]"]=At["[object Date]"]=At["[object Error]"]=At["[object Function]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object WeakMap]"]=!1;var mt=function(e){return D(e)&&Je(e.length)&&!!At[B(e)]};var gt=function(e){return function(t){return e(t)}},Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nt=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,St=Nt&&Nt.exports===Lt&&y.process,_t=function(){try{return Nt&&Nt.require&&Nt.require("util").types||St&&St.binding&&St.binding("util")}catch{}}(),Ot=_t&&_t.isTypedArray,Rt=Ot?gt(Ot):mt,yt=Object.prototype.hasOwnProperty;var vt=function(e,t){var r=G(e),i=!r&&ht(e),n=!r&&!i&&Tt(e),a=!r&&!i&&!n&&Rt(e),s=r||i||n||a,o=s?at(e.length,String):[],l=o.length;for(var c in e)(t||yt.call(e,c))&&(!s||!("length"==c||n&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ye(c,l)))&&o.push(c);return o};var It=function(e,t){return function(r){return e(t(r))}},Ct=It(Object.keys,Object),xt=Object.prototype.hasOwnProperty;var Ut=function(e){if(!nt(e))return Ct(e);var t=[];for(var r in Object(e))xt.call(e,r)&&"constructor"!=r&&t.push(r);return t};var bt=function(e){return et(e)?vt(e):Ut(e)},Mt=Object.prototype.hasOwnProperty,kt=rt(function(e,t){if(nt(t)||et(t))ze(t,bt(t),e);else for(var r in t)Mt.call(t,r)&&Xe(e,r,t[r])}),Pt=kt;var Ft=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},wt=Object.prototype.hasOwnProperty;var Bt=function(e){if(!q(e))return Ft(e);var t=nt(e),r=[];for(var i in e)"constructor"==i&&(t||!wt.call(e,i))||r.push(i);return r};var Dt=function(e){return et(e)?vt(e,!0):Bt(e)},$t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/;var Gt=function(e,t){if(G(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!$(e))||(jt.test(e)||!$t.test(e)||null!=t&&e in Object(t))},Vt=Se(Object,"create");var Yt=function(){this.__data__=Vt?Vt(null):{},this.size=0};var Wt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ht=Object.prototype.hasOwnProperty;var Kt=function(e){var t=this.__data__;if(Vt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ht.call(t,e)?t[e]:void 0},Xt=Object.prototype.hasOwnProperty;var zt=function(e){var t=this.__data__;return Vt?void 0!==t[e]:Xt.call(t,e)};var Qt=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vt&&void 0===t?"__lodash_hash_undefined__":t,this};function qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}qt.prototype.clear=Yt,qt.prototype.delete=Wt,qt.prototype.get=Kt,qt.prototype.has=zt,qt.prototype.set=Qt;var Zt=qt;var Jt=function(){this.__data__=[],this.size=0};var er=function(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1},tr=Array.prototype.splice;var rr=function(e){var t=this.__data__,r=er(t,e);return!(r<0)&&(r==t.length-1?t.pop():tr.call(t,r,1),--this.size,!0)};var ir=function(e){var t=this.__data__,r=er(t,e);return r<0?void 0:t[r][1]};var nr=function(e){return er(this.__data__,e)>-1};var ar=function(e,t){var r=this.__data__,i=er(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};function sr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}sr.prototype.clear=Jt,sr.prototype.delete=rr,sr.prototype.get=ir,sr.prototype.has=nr,sr.prototype.set=ar;var or=sr,lr=Se(I,"Map");var cr=function(){this.size=0,this.__data__={hash:new Zt,map:new(lr||or),string:new Zt}};var ur=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var hr=function(e,t){var r=e.__data__;return ur(t)?r["string"==typeof t?"string":"hash"]:r.map};var pr=function(e){var t=hr(this,e).delete(e);return this.size-=t?1:0,t};var fr=function(e){return hr(this,e).get(e)};var dr=function(e){return hr(this,e).has(e)};var Er=function(e,t){var r=hr(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};function Tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Tr.prototype.clear=cr,Tr.prototype.delete=pr,Tr.prototype.get=fr,Tr.prototype.has=dr,Tr.prototype.set=Er;var Ar=Tr;function mr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var s=e.apply(this,i);return r.cache=a.set(n,s)||a,s};return r.cache=new(mr.Cache||Ar),r}mr.Cache=Ar;var gr=mr;var Lr=function(e){var t=gr(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t},Nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sr=/\\(\\)?/g,_r=Lr(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Nr,function(e,r,i,n){t.push(i?n.replace(Sr,"$1"):r||e)}),t}),Or=_r;var Rr=function(e){return null==e?"":H(e)};var yr=function(e,t){return G(e)?e:Gt(e,t)?[e]:Or(Rr(e))},vr=1/0;var Ir=function(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-vr?"-0":t};var Cr=function(e,t){for(var r=0,i=(t=yr(t,e)).length;null!=e&&r<i;)e=e[Ir(t[r++])];return r&&r==i?e:void 0};var xr=function(e,t,r){var i=null==e?void 0:Cr(e,t);return void 0===i?r:i};var Ur=function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e},br=C?C.isConcatSpreadable:void 0;var Mr=function(e){return G(e)||ht(e)||!!(br&&e&&e[br])};var kr=function e(t,r,i,n,a){var s=-1,o=t.length;for(i||(i=Mr),a||(a=[]);++s<o;){var l=t[s];r>0&&i(l)?r>1?e(l,r-1,i,n,a):Ur(a,l):n||(a[a.length]=l)}return a};var Pr=function(e){return(null==e?0:e.length)?kr(e,1):[]},Fr=It(Object.getPrototypeOf,Object);var wr=function(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a};var Br=function(e,t,r,i){var n=-1,a=null==e?0:e.length;for(i&&a&&(r=e[++n]);++n<a;)r=t(r,e[n],n,e);return r};var Dr=function(){this.__data__=new or,this.size=0};var $r=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var jr=function(e){return this.__data__.get(e)};var Gr=function(e){return this.__data__.has(e)};var Vr=function(e,t){var r=this.__data__;if(r instanceof or){var i=r.__data__;if(!lr||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ar(i)}return r.set(e,t),this.size=r.size,this};function Yr(e){var t=this.__data__=new or(e);this.size=t.size}Yr.prototype.clear=Dr,Yr.prototype.delete=$r,Yr.prototype.get=jr,Yr.prototype.has=Gr,Yr.prototype.set=Vr;var Wr=Yr;var Hr=function(e,t){return e&&ze(t,bt(t),e)};var Kr=function(e,t){return e&&ze(t,Dt(t),e)},Xr="object"==typeof exports&&exports&&!exports.nodeType&&exports,zr=Xr&&"object"==typeof module&&module&&!module.nodeType&&module,Qr=zr&&zr.exports===Xr?I.Buffer:void 0,qr=Qr?Qr.allocUnsafe:void 0;var Zr=function(e,t){if(t)return e.slice();var r=e.length,i=qr?qr(r):new e.constructor(r);return e.copy(i),i};var Jr=function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[n++]=s)}return a};var ei=function(){return[]},ti=Object.prototype.propertyIsEnumerable,ri=Object.getOwnPropertySymbols,ii=ri?function(e){return null==e?[]:(e=Object(e),Jr(ri(e),function(t){return ti.call(e,t)}))}:ei,ni=ii;var ai=function(e,t){return ze(e,ni(e),t)},si=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ur(t,ni(e)),e=Fr(e);return t}:ei,oi=si;var li=function(e,t){return ze(e,oi(e),t)};var ci=function(e,t,r){var i=t(e);return G(e)?i:Ur(i,r(e))};var ui=function(e){return ci(e,bt,ni)};var hi=function(e){return ci(e,Dt,oi)},pi=Se(I,"DataView"),fi=Se(I,"Promise"),di=Se(I,"Set"),Ei="[object Map]",Ti="[object Promise]",Ai="[object Set]",mi="[object WeakMap]",gi="[object DataView]",Li=fe(pi),Ni=fe(lr),Si=fe(fi),_i=fe(di),Oi=fe(_e),Ri=B;(pi&&Ri(new pi(new ArrayBuffer(1)))!=gi||lr&&Ri(new lr)!=Ei||fi&&Ri(fi.resolve())!=Ti||di&&Ri(new di)!=Ai||_e&&Ri(new _e)!=mi)&&(Ri=function(e){var t=B(e),r="[object Object]"==t?e.constructor:void 0,i=r?fe(r):"";if(i)switch(i){case Li:return gi;case Ni:return Ei;case Si:return Ti;case _i:return Ai;case Oi:return mi}return t});var yi=Ri,vi=Object.prototype.hasOwnProperty;var Ii=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&vi.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Ci=I.Uint8Array;var xi=function(e){var t=new e.constructor(e.byteLength);return new Ci(t).set(new Ci(e)),t};var Ui=function(e,t){var r=t?xi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},bi=/\w*$/;var Mi=function(e){var t=new e.constructor(e.source,bi.exec(e));return t.lastIndex=e.lastIndex,t},ki=C?C.prototype:void 0,Pi=ki?ki.valueOf:void 0;var Fi=function(e){return Pi?Object(Pi.call(e)):{}};var wi=function(e,t){var r=t?xi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Bi=function(e,t,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return xi(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return Ui(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return wi(e,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return Mi(e);case"[object Symbol]":return Fi(e)}};var Di=function(e){return"function"!=typeof e.constructor||nt(e)?{}:ye(Fr(e))};var $i=function(e){return D(e)&&"[object Map]"==yi(e)},ji=_t&&_t.isMap,Gi=ji?gt(ji):$i;var Vi=function(e){return D(e)&&"[object Set]"==yi(e)},Yi=_t&&_t.isSet,Wi=Yi?gt(Yi):Vi,Hi="[object Arguments]",Ki="[object Function]",Xi="[object Object]",zi={};zi[Hi]=zi["[object Array]"]=zi["[object ArrayBuffer]"]=zi["[object DataView]"]=zi["[object Boolean]"]=zi["[object Date]"]=zi["[object Float32Array]"]=zi["[object Float64Array]"]=zi["[object Int8Array]"]=zi["[object Int16Array]"]=zi["[object Int32Array]"]=zi["[object Map]"]=zi["[object Number]"]=zi[Xi]=zi["[object RegExp]"]=zi["[object Set]"]=zi["[object String]"]=zi["[object Symbol]"]=zi["[object Uint8Array]"]=zi["[object Uint8ClampedArray]"]=zi["[object Uint16Array]"]=zi["[object Uint32Array]"]=!0,zi["[object Error]"]=zi[Ki]=zi["[object WeakMap]"]=!1;var Qi=function e(t,r,i,n,a,s){var o,l=1&r,c=2&r,u=4&r;if(i&&(o=a?i(t,n,a,s):i(t)),void 0!==o)return o;if(!q(t))return t;var h=G(t);if(h){if(o=Ii(t),!l)return Ce(t,o)}else{var p=yi(t),f=p==Ki||"[object GeneratorFunction]"==p;if(Tt(t))return Zr(t,l);if(p==Xi||p==Hi||f&&!a){if(o=c||f?{}:Di(t),!l)return c?li(t,Kr(o,t)):ai(t,Hr(o,t))}else{if(!zi[p])return a?t:{};o=Bi(t,p,l)}}s||(s=new Wr);var d=s.get(t);if(d)return d;s.set(t,o),Wi(t)?t.forEach(function(n){o.add(e(n,r,i,n,t,s))}):Gi(t)&&t.forEach(function(n,a){o.set(a,e(n,r,i,a,t,s))});var E=h?void 0:(u?c?hi:ui:c?Dt:bt)(t);return we(E||t,function(n,a){E&&(n=t[a=n]),Xe(o,a,e(n,r,i,a,t,s))}),o};var qi=function(e){return Qi(e,4)};var Zi=function(e){for(var t=-1,r=null==e?0:e.length,i=0,n=[];++t<r;){var a=e[t];a&&(n[i++]=a)}return n};var Ji=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var en=function(e){return this.__data__.has(e)};function tn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ar;++t<r;)this.add(e[t])}tn.prototype.add=tn.prototype.push=Ji,tn.prototype.has=en;var rn=tn;var nn=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1};var an=function(e,t){return e.has(t)};var sn=function(e,t,r,i,n,a){var s=1&r,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,f=2&r?new rn:void 0;for(a.set(e,t),a.set(t,e);++h<o;){var d=e[h],E=t[h];if(i)var T=s?i(E,d,h,t,e,a):i(d,E,h,e,t,a);if(void 0!==T){if(T)continue;p=!1;break}if(f){if(!nn(t,function(e,t){if(!an(f,t)&&(d===e||n(d,e,r,i,a)))return f.push(t)})){p=!1;break}}else if(d!==E&&!n(d,E,r,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p};var on=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r};var ln=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},cn=C?C.prototype:void 0,un=cn?cn.valueOf:void 0;var hn=function(e,t,r,i,n,a,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Ci(e),new Ci(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return He(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=on;case"[object Set]":var l=1&i;if(o||(o=ln),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;i|=2,s.set(e,t);var u=sn(o(e),o(t),i,n,a,s);return s.delete(e),u;case"[object Symbol]":if(un)return un.call(e)==un.call(t)}return!1},pn=Object.prototype.hasOwnProperty;var fn=function(e,t,r,i,n,a){var s=1&r,o=ui(e),l=o.length;if(l!=ui(t).length&&!s)return!1;for(var c=l;c--;){var u=o[c];if(!(s?u in t:pn.call(t,u)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var f=!0;a.set(e,t),a.set(t,e);for(var d=s;++c<l;){var E=e[u=o[c]],T=t[u];if(i)var A=s?i(T,E,u,t,e,a):i(E,T,u,e,t,a);if(!(void 0===A?E===T||n(E,T,r,i,a):A)){f=!1;break}d||(d="constructor"==u)}if(f&&!d){var m=e.constructor,g=t.constructor;m!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g)&&(f=!1)}return a.delete(e),a.delete(t),f},dn="[object Arguments]",En="[object Array]",Tn="[object Object]",An=Object.prototype.hasOwnProperty;var mn=function(e,t,r,i,n,a){var s=G(e),o=G(t),l=s?En:yi(e),c=o?En:yi(t),u=(l=l==dn?Tn:l)==Tn,h=(c=c==dn?Tn:c)==Tn,p=l==c;if(p&&Tt(e)){if(!Tt(t))return!1;s=!0,u=!1}if(p&&!u)return a||(a=new Wr),s||Rt(e)?sn(e,t,r,i,n,a):hn(e,t,l,r,i,n,a);if(!(1&r)){var f=u&&An.call(e,"__wrapped__"),d=h&&An.call(t,"__wrapped__");if(f||d){var E=f?e.value():e,T=d?t.value():t;return a||(a=new Wr),n(E,T,r,i,a)}}return!!p&&(a||(a=new Wr),fn(e,t,r,i,n,a))};var gn=function e(t,r,i,n,a){return t===r||(null==t||null==r||!D(t)&&!D(r)?t!=t&&r!=r:mn(t,r,i,n,e,a))};var Ln=function(e,t,r,i){var n=r.length,a=n,s=!i;if(null==e)return!a;for(e=Object(e);n--;){var o=r[n];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<a;){var l=(o=r[n])[0],c=e[l],u=o[1];if(s&&o[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Wr;if(i)var p=i(c,u,l,e,t,h);if(!(void 0===p?gn(u,c,3,i,h):p))return!1}}return!0};var Nn=function(e){return e==e&&!q(e)};var Sn=function(e){for(var t=bt(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,Nn(n)]}return t};var _n=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}};var On=function(e){var t=Sn(e);return 1==t.length&&t[0][2]?_n(t[0][0],t[0][1]):function(r){return r===e||Ln(r,e,t)}};var Rn=function(e,t){return null!=e&&t in Object(e)};var yn=function(e,t,r){for(var i=-1,n=(t=yr(t,e)).length,a=!1;++i<n;){var s=Ir(t[i]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++i!=n?a:!!(n=null==e?0:e.length)&&Je(n)&&Ye(s,n)&&(G(e)||ht(e))};var vn=function(e,t){return null!=e&&yn(e,t,Rn)};var In=function(e,t){return Gt(e)&&Nn(t)?_n(Ir(e),t):function(r){var i=xr(r,e);return void 0===i&&i===t?vn(r,e):gn(t,i,3)}};var Cn=function(e){return function(t){return t?.[e]}};var xn=function(e){return function(t){return Cr(t,e)}};var Un=function(e){return Gt(e)?Cn(Ir(e)):xn(e)};var bn=function(e){return"function"==typeof e?e:null==e?se:"object"==typeof e?G(e)?In(e[0],e[1]):On(e):Un(e)};var Mn=function(e,t,r,i){for(var n=-1,a=null==e?0:e.length;++n<a;){var s=e[n];t(i,s,r(s),e)}return i};var kn=function(e){return function(t,r,i){for(var n=-1,a=Object(t),s=i(t),o=s.length;o--;){var l=s[e?o:++n];if(!1===r(a[l],l,a))break}return t}},Pn=kn();var Fn=function(e,t){return e&&Pn(e,t,bt)};var wn=function(e,t){return function(r,i){if(null==r)return r;if(!et(r))return e(r,i);for(var n=r.length,a=t?n:-1,s=Object(r);(t?a--:++a<n)&&!1!==i(s[a],a,s););return r}},Bn=wn(Fn);var Dn=function(e,t,r,i){return Bn(e,function(e,n,a){t(i,e,r(e),a)}),i};var $n=function(e,t){return function(r,i){var n=G(r)?Mn:Dn,a=t?t():{};return n(r,e,bn(i,2),a)}},jn=Object.prototype,Gn=jn.hasOwnProperty,Vn=Ze(function(e,t){e=Object(e);var r=-1,i=t.length,n=i>2?t[2]:void 0;for(n&&tt(t[0],t[1],n)&&(i=1);++r<i;)for(var a=t[r],s=Dt(a),o=-1,l=s.length;++o<l;){var c=s[o],u=e[c];(void 0===u||He(u,jn[c])&&!Gn.call(e,c))&&(e[c]=a[c])}return e}),Yn=Vn;var Wn=function(e){return D(e)&&et(e)};var Hn=function(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1};var Kn=function(e,t,r,i){var n=-1,a=Ge,s=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=j(t,gt(r))),i?(a=Hn,s=!1):t.length>=200&&(a=an,s=!1,t=new rn(t));e:for(;++n<o;){var u=e[n],h=null==r?u:r(u);if(u=i||0!==u?u:0,s&&h==h){for(var p=c;p--;)if(t[p]===h)continue e;l.push(u)}else a(t,h,i)||l.push(u)}return l},Xn=Ze(function(e,t){return Wn(e)?Kn(e,kr(t,1,Wn,!0)):[]}),zn=Xn;var Qn=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var qn=function(e,t,r){var i=null==e?0:e.length;return i?(t=r||void 0===t?1:ae(t),wr(e,t<0?0:t,i)):[]};var Zn=function(e,t,r){var i=null==e?0:e.length;return i?(t=r||void 0===t?1:ae(t),wr(e,0,(t=i-t)<0?0:t)):[]};var Jn=function(e){return"function"==typeof e?e:se};var ea=function(e,t){return(G(e)?we:Bn)(e,Jn(t))};var ta=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0};var ra=function(e,t){var r=!0;return Bn(e,function(e,i,n){return r=!!t(e,i,n)}),r};var ia=function(e,t,r){var i=G(e)?ta:ra;return r&&tt(e,t,r)&&(t=void 0),i(e,bn(t,3))};var na=function(e,t){var r=[];return Bn(e,function(e,i,n){t(e,i,n)&&r.push(e)}),r};var aa=function(e,t){return(G(e)?Jr:na)(e,bn(t,3))};var sa=function(e){return function(t,r,i){var n=Object(t);if(!et(t)){var a=bn(r,3);t=bt(t),r=function(e){return a(n[e],e,n)}}var s=e(t,r,i);return s>-1?n[a?t[s]:s]:void 0}},oa=Math.max;var la=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var n=null==r?0:ae(r);return n<0&&(n=oa(i+n,0)),Be(e,bn(t,3),n)},ca=sa(la);var ua=function(e){return e&&e.length?e[0]:void 0};var ha=function(e,t){var r=-1,i=et(e)?Array(e.length):[];return Bn(e,function(e,n,a){i[++r]=t(e,n,a)}),i};var pa=function(e,t){return(G(e)?j:ha)(e,bn(t,3))};var fa=function(e,t){return kr(pa(e,t),1)},da=Object.prototype.hasOwnProperty,Ea=$n(function(e,t,r){da.call(e,r)?e[r].push(t):We(e,r,[t])}),Ta=Ea,Aa=Object.prototype.hasOwnProperty;var ma=function(e,t){return null!=e&&Aa.call(e,t)};var ga=function(e,t){return null!=e&&yn(e,t,ma)};var La=function(e){return"string"==typeof e||!G(e)&&D(e)&&"[object String]"==B(e)};var Na=function(e,t){return j(t,function(t){return e[t]})};var Sa=function(e){return null==e?[]:Na(e,bt(e))},_a=Math.max;var Oa=function(e,t,r,i){e=et(e)?e:Sa(e),r=r&&!i?ae(r):0;var n=e.length;return r<0&&(r=_a(n+r,0)),La(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&je(e,t,r)>-1},Ra=Math.max;var ya=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var n=null==r?0:ae(r);return n<0&&(n=Ra(i+n,0)),je(e,t,n)},va=Object.prototype.hasOwnProperty;var Ia=function(e){if(null==e)return!0;if(et(e)&&(G(e)||"string"==typeof e||"function"==typeof e.splice||Tt(e)||Rt(e)||ht(e)))return!e.length;var t=yi(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(nt(e))return!Ut(e).length;for(var r in e)if(va.call(e,r))return!1;return!0};var Ca=function(e){return D(e)&&"[object RegExp]"==B(e)},xa=_t&&_t.isRegExp,Ua=xa?gt(xa):Ca;var ba=function(e){return void 0===e};var Ma=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}};var ka=function(e,t,r,i){if(!q(e))return e;for(var n=-1,a=(t=yr(t,e)).length,s=a-1,o=e;null!=o&&++n<a;){var l=Ir(t[n]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=s){var u=o[l];void 0===(c=i?i(u,l,o):void 0)&&(c=q(u)?u:Ye(t[n+1])?[]:{})}Xe(o,l,c),o=o[l]}return e};var Pa=function(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var s=t[i],o=Cr(e,s);r(o,s)&&ka(a,yr(s,e),o)}return a};var Fa=function(e,t){if(null==e)return{};var r=j(hi(e),function(e){return[e]});return t=bn(t),Pa(e,r,function(e,r){return t(e,r[0])})};var wa=function(e,t,r,i,n){return n(e,function(e,n,a){r=i?(i=!1,e):t(r,e,n,a)}),r};var Ba=function(e,t,r){var i=G(e)?Br:wa,n=arguments.length<3;return i(e,bn(t,4),r,n,Bn)};var Da=function(e,t){return(G(e)?Jr:na)(e,Ma(bn(t,3)))};var $a=function(e,t){var r;return Bn(e,function(e,i,n){return!(r=t(e,i,n))}),!!r};var ja=function(e,t,r){var i=G(e)?nn:$a;return r&&tt(e,t,r)&&(t=void 0),i(e,bn(t,3))},Ga=di&&1/ln(new di([,-0]))[1]==1/0?function(e){return new di(e)}:Ie,Va=Ga;var Ya=function(e,t,r){var i=-1,n=Ge,a=e.length,s=!0,o=[],l=o;if(r)s=!1,n=Hn;else if(a>=200){var c=t?null:Va(e);if(c)return ln(c);s=!1,n=an,l=new rn}else l=t?[]:o;e:for(;++i<a;){var u=e[i],h=t?t(u):u;if(u=r||0!==u?u:0,s&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),o.push(u)}else n(l,h,r)||(l!==o&&l.push(h),o.push(u))}return o};var Wa=function(e){return e&&e.length?Ya(e):[]};function Ha(e){console&&console.error&&console.error(`Error: ${e}`)}function Ka(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function Xa(e){let t=(new Date).getTime(),r=e();return{time:(new Date).getTime()-t,value:r}}function za(e){function t(){}t.prototype=e;let r=new t;function i(){return typeof r.bar}return i(),i(),e}function Qa(e){return function(e){return La(e.LABEL)&&""!==e.LABEL}(e)?e.LABEL:e.name}var qa=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ea(this.definition,t=>{t.accept(e)})}},Za=class extends qa{constructor(e){super([]),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}set definition(e){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(e){e.visit(this)}},Ja=class extends qa{constructor(e){super(e.definition),this.orgText="",Pt(this,Fa(e,e=>void 0!==e))}},es=class extends qa{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Pt(this,Fa(e,e=>void 0!==e))}},ts=class extends qa{constructor(e){super(e.definition),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}},rs=class extends qa{constructor(e){super(e.definition),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}},is=class extends qa{constructor(e){super(e.definition),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}},ns=class extends qa{constructor(e){super(e.definition),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}},as=class extends qa{constructor(e){super(e.definition),this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}},ss=class extends qa{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Pt(this,Fa(e,e=>void 0!==e))}},os=class{constructor(e){this.idx=1,Pt(this,Fa(e,e=>void 0!==e))}accept(e){e.visit(this)}};function ls(e){function t(e){return pa(e,ls)}if(e instanceof Za){let t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return La(e.label)&&(t.label=e.label),t}if(e instanceof es)return{type:"Alternative",definition:t(e.definition)};if(e instanceof ts)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof rs)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof is)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:ls(new os({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof as)return{type:"RepetitionWithSeparator",idx:e.idx,separator:ls(new os({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof ns)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof ss)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof os){let t={type:"Terminal",name:e.terminalType.name,label:Qa(e.terminalType),idx:e.idx};La(e.label)&&(t.terminalLabel=e.label);let r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(t.pattern=Ua(r)?r.source:r),t}if(e instanceof Ja)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}var cs=class{visit(e){let t=e;switch(t.constructor){case Za:return this.visitNonTerminal(t);case es:return this.visitAlternative(t);case ts:return this.visitOption(t);case rs:return this.visitRepetitionMandatory(t);case is:return this.visitRepetitionMandatoryWithSeparator(t);case as:return this.visitRepetitionWithSeparator(t);case ns:return this.visitRepetition(t);case ss:return this.visitAlternation(t);case os:return this.visitTerminal(t);case Ja:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function us(e,t=[]){return e instanceof ts||e instanceof ns||e instanceof as||(e instanceof ss?ja(e.definition,e=>us(e,t)):!(e instanceof Za&&Oa(t,e))&&(e instanceof qa&&(e instanceof Za&&t.push(e),ia(e.definition,e=>us(e,t)))))}function hs(e){if(e instanceof Za)return"SUBRULE";if(e instanceof ts)return"OPTION";if(e instanceof ss)return"OR";if(e instanceof rs)return"AT_LEAST_ONE";if(e instanceof is)return"AT_LEAST_ONE_SEP";if(e instanceof as)return"MANY_SEP";if(e instanceof ns)return"MANY";if(e instanceof os)return"CONSUME";throw Error("non exhaustive match")}var ps=class{walk(e,t=[]){ea(e.definition,(r,i)=>{let n=qn(e.definition,i+1);if(r instanceof Za)this.walkProdRef(r,n,t);else if(r instanceof os)this.walkTerminal(r,n,t);else if(r instanceof es)this.walkFlat(r,n,t);else if(r instanceof ts)this.walkOption(r,n,t);else if(r instanceof rs)this.walkAtLeastOne(r,n,t);else if(r instanceof is)this.walkAtLeastOneSep(r,n,t);else if(r instanceof as)this.walkManySep(r,n,t);else if(r instanceof ns)this.walkMany(r,n,t);else{if(!(r instanceof ss))throw Error("non exhaustive match");this.walkOr(r,n,t)}})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){let i=t.concat(r);this.walk(e,i)}walkOption(e,t,r){let i=t.concat(r);this.walk(e,i)}walkAtLeastOne(e,t,r){let i=[new ts({definition:e.definition})].concat(t,r);this.walk(e,i)}walkAtLeastOneSep(e,t,r){let i=fs(e,t,r);this.walk(e,i)}walkMany(e,t,r){let i=[new ts({definition:e.definition})].concat(t,r);this.walk(e,i)}walkManySep(e,t,r){let i=fs(e,t,r);this.walk(e,i)}walkOr(e,t,r){let i=t.concat(r);ea(e.definition,e=>{let t=new es({definition:[e]});this.walk(t,i)})}};function fs(e,t,r){return[new ts({definition:[new os({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function ds(e){if(e instanceof Za)return ds(e.referencedRule);if(e instanceof os)return function(e){return[e.terminalType]}(e);if(function(e){return e instanceof es||e instanceof ts||e instanceof ns||e instanceof rs||e instanceof is||e instanceof as||e instanceof os||e instanceof Ja}(e))return function(e){let t,r=[],i=e.definition,n=0,a=i.length>n,s=!0;for(;a&&s;)t=i[n],s=us(t),r=r.concat(ds(t)),n+=1,a=i.length>n;return Wa(r)}(e);if(function(e){return e instanceof ss}(e))return function(e){let t=pa(e.definition,e=>ds(e));return Wa(Pr(t))}(e);throw Error("non exhaustive match")}var Es="_~IN~_",Ts=class extends ps{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){let i=function(e,t){return e.name+t+Es}(e.referencedRule,e.idx)+this.topProd.name,n=t.concat(r),a=ds(new es({definition:n}));this.follows[i]=a}};function As(e){return e.charCodeAt(0)}function ms(e,t){Array.isArray(e)?e.forEach(function(e){t.push(e)}):t.push(e)}function gs(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t];e[t]=!0}function Ls(e){if(void 0===e)throw Error("Internal Error - Should never get here!");return!0}function Ns(){throw Error("Internal Error - Should never get here!")}function Ss(e){return"Character"===e.type}var _s=[];for(let Yp=As("0");Yp<=As("9");Yp++)_s.push(Yp);var Os=[As("_")].concat(_s);for(let Yp=As("a");Yp<=As("z");Yp++)Os.push(Yp);for(let Yp=As("A");Yp<=As("Z");Yp++)Os.push(Yp);var Rs=[As(" "),As("\f"),As("\n"),As("\r"),As("\t"),As("\v"),As("\t"),As("\xa0"),As("\u1680"),As("\u2000"),As("\u2001"),As("\u2002"),As("\u2003"),As("\u2004"),As("\u2005"),As("\u2006"),As("\u2007"),As("\u2008"),As("\u2009"),As("\u200a"),As("\u2028"),As("\u2029"),As("\u202f"),As("\u205f"),As("\u3000"),As("\ufeff")],ys=/[0-9a-fA-F]/,vs=/[0-9]/,Is=/[1-9]/,Cs=class{visitChildren(e){for(let t in e){let r=e[t];e.hasOwnProperty(t)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach(e=>{this.visit(e)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}},xs={},Us=new class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let t=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":gs(r,"global");break;case"i":gs(r,"ignoreCase");break;case"m":gs(r,"multiLine");break;case"u":gs(r,"unicode");break;case"y":gs(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){let e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){let e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":let t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}Ls(t);let r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return Ns()}quantifier(e=!1){let t,r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":let r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":let e;this.isDigit()?(e=this.integerIncludingZero(),t={atLeast:r,atMost:e}):t={atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;Ls(t)}if((!0!==e||void 0!==t)&&Ls(t))return"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),Ls(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Ns()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[As("\n"),As("\r"),As("\u2028"),As("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=_s;break;case"D":e=_s,t=!0;break;case"s":e=Rs;break;case"S":e=Rs,t=!0;break;case"w":e=Os;break;case"W":e=Os,t=!0}return Ls(e)?{type:"Set",value:e,complement:t}:Ns()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=As("\f");break;case"n":e=As("\n");break;case"r":e=As("\r");break;case"t":e=As("\t");break;case"v":e=As("\v")}return Ls(e)?{type:"Character",value:e}:Ns()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:As("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:As(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:As(this.popChar())}}}characterClass(){let e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){let t=this.classAtom();t.type;if(Ss(t)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom();r.type;if(Ss(r)){if(r.value<t.value)throw Error("Range out of order in character class");e.push({from:t.value,to:r.value})}else ms(t.value,e),e.push(As("-")),ms(r.value,e)}else ms(t.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:As("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;if("?"===(this.consumeChar("("),this.peekChar(0)))this.consumeChar("?"),this.consumeChar(":"),e=!1;else this.groupIdx++;let t=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(!1===Is.test(e))throw Error("Expecting a positive integer");for(;vs.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(!1===vs.test(e))throw Error("Expecting an integer");for(;vs.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:As(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return vs.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){let e=this.saveState();try{return void 0!==this.quantifier(!0)}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let e=this.popChar();if(!1===ys.test(e))throw Error("Expecting a HexDecimal digits");t+=e}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};function bs(e){let t=e.toString();if(xs.hasOwnProperty(t))return xs[t];{let e=Us.pattern(t);return xs[t]=e,e}}var Ms="Complement Sets are not supported for first char optimization",ks='Unable to use "first char" lexer optimizations:\n';function Ps(e,t=!1){try{let t=bs(e);return Fs(t.value,{},t.flags.ignoreCase)}catch(r){if(r.message===Ms)t&&Ka(`${ks}\tUnable to optimize: < ${e.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),Ha(`${ks}\n\tFailed parsing: < ${e.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function Fs(e,t,r){switch(e.type){case"Disjunction":for(let n=0;n<e.value.length;n++)Fs(e.value[n],t,r);break;case"Alternative":let i=e.value;for(let e=0;e<i.length;e++){let n=i[e];switch(n.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=n;switch(a.type){case"Character":ws(a.value,t,r);break;case"Set":if(!0===a.complement)throw Error(Ms);ea(a.value,e=>{if("number"==typeof e)ws(e,t,r);else{let i=e;if(!0===r)for(let e=i.from;e<=i.to;e++)ws(e,t,r);else{for(let e=i.from;e<=i.to&&e<ao;e++)ws(e,t,r);if(i.to>=ao){let e=i.from>=ao?i.from:ao,r=i.to,n=oo(e),a=oo(r);for(let i=n;i<=a;i++)t[i]=i}}}});break;case"Group":Fs(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}let s=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===Ds(a)||"Group"!==a.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return Sa(t)}function ws(e,t,r){let i=oo(e);t[i]=i,!0===r&&function(e,t){let r=String.fromCharCode(e),i=r.toUpperCase();if(i!==r){let e=oo(i.charCodeAt(0));t[e]=e}else{let e=r.toLowerCase();if(e!==r){let r=oo(e.charCodeAt(0));t[r]=r}}}(e,t)}function Bs(e,t){return ca(e.value,e=>{if("number"==typeof e)return Oa(t,e);{let r=e;return void 0!==ca(t,e=>r.from<=e&&e<=r.to)}})}function Ds(e){let t=e.quantifier;return!(!t||0!==t.atLeast)||!!e.value&&(G(e.value)?ia(e.value,Ds):Ds(e.value))}var $s=class extends Cs{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}super.visitChildren(e)}}visitCharacter(e){Oa(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?void 0===Bs(e,this.targetCharCodes)&&(this.found=!0):void 0!==Bs(e,this.targetCharCodes)&&(this.found=!0)}};function js(e,t){if(t instanceof RegExp){let r=bs(t),i=new $s(e);return i.visit(r),i.found}return void 0!==ca(t,t=>Oa(e,t.charCodeAt(0)))}var Gs="PATTERN",Vs="defaultMode",Ys="modes",Ws="boolean"==typeof new RegExp("(?:)").sticky;function Hs(e,t){let r,i=(t=Yn(t,{useSticky:Ws,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(e,t)=>t()})).tracer;i("initCharCodeToOptimizedIndexMap",()=>{!function(){if(Ia(so)){so=new Array(65536);for(let e=0;e<65536;e++)so[e]=e>255?255+~~(e/255):e}}()}),i("Reject Lexer.NA",()=>{r=Da(e,e=>e[Gs]===No.NA)});let n,a,s,o,l,c,u,h,p,f,d,E=!1;i("Transform Patterns",()=>{E=!1,n=pa(r,e=>{let r=e[Gs];if(Ua(r)){let e=r.source;return 1!==e.length||"^"===e||"$"===e||"."===e||r.ignoreCase?2!==e.length||"\\"!==e[0]||Oa(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])?t.useSticky?qs(r):Qs(r):e[1]:e}if(le(r))return E=!0,{exec:r};if("object"==typeof r)return E=!0,r;if("string"==typeof r){if(1===r.length)return r;{let e=r.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=new RegExp(e);return t.useSticky?qs(i):Qs(i)}}throw Error("non exhaustive match")})}),i("misc mapping",()=>{a=pa(r,e=>e.tokenTypeIdx),s=pa(r,e=>{let t=e.GROUP;if(t!==No.SKIPPED){if(La(t))return t;if(ba(t))return!1;throw Error("non exhaustive match")}}),o=pa(r,e=>{let t=e.LONGER_ALT;if(t)return G(t)?pa(t,e=>ya(r,e)):[ya(r,t)]}),l=pa(r,e=>e.PUSH_MODE),c=pa(r,e=>ga(e,"POP_MODE"))}),i("Line Terminator Handling",()=>{let e=io(t.lineTerminatorCharacters);u=pa(r,e=>!1),"onlyOffset"!==t.positionTracking&&(u=pa(r,t=>ga(t,"LINE_BREAKS")?!!t.LINE_BREAKS:!1===to(t,e)&&js(e,t.PATTERN)))}),i("Misc Mapping #2",()=>{h=pa(r,Zs),p=pa(n,Js),f=Ba(r,(e,t)=>{let r=t.GROUP;return La(r)&&r!==No.SKIPPED&&(e[r]=[]),e},{}),d=pa(n,(e,t)=>({pattern:n[t],longerAlt:o[t],canLineTerminator:u[t],isCustom:h[t],short:p[t],group:s[t],push:l[t],pop:c[t],tokenTypeIdx:a[t],tokenType:r[t]}))});let T=!0,A=[];return t.safeMode||i("First Char Optimization",()=>{A=Ba(r,(e,r,i)=>{if("string"==typeof r.PATTERN){let t=oo(r.PATTERN.charCodeAt(0));no(e,t,d[i])}else if(G(r.START_CHARS_HINT)){let t;ea(r.START_CHARS_HINT,r=>{let n=oo("string"==typeof r?r.charCodeAt(0):r);t!==n&&(t=n,no(e,n,d[i]))})}else if(Ua(r.PATTERN))if(r.PATTERN.unicode)T=!1,t.ensureOptimizations&&Ha(`${ks}\tUnable to analyze < ${r.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let n=Ps(r.PATTERN,t.ensureOptimizations);Ia(n)&&(T=!1),ea(n,t=>{no(e,t,d[i])})}else t.ensureOptimizations&&Ha(`${ks}\tTokenType: <${r.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),T=!1;return e},[])}),{emptyGroups:f,patternIdxToConfig:d,charCodeToPatternIdxToConfig:A,hasCustom:E,canBeOptimized:T}}function Ks(e,t){let r=[],i=function(e){let t=aa(e,e=>!ga(e,Gs)),r=pa(t,e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:mo.MISSING_PATTERN,tokenTypes:[e]})),i=zn(e,t);return{errors:r,valid:i}}(e);r=r.concat(i.errors);let n=function(e){let t=aa(e,e=>{let t=e[Gs];return!(Ua(t)||le(t)||ga(t,"exec")||La(t))}),r=pa(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:mo.INVALID_PATTERN,tokenTypes:[e]})),i=zn(e,t);return{errors:r,valid:i}}(i.valid),a=n.valid;return r=r.concat(n.errors),r=r.concat(function(e){let t=[],r=aa(e,e=>Ua(e[Gs]));return t=t.concat(function(e){class t extends Cs{constructor(){super(...arguments),this.found=!1}visitEndAnchor(e){this.found=!0}}let r=aa(e,e=>{let r=e.PATTERN;try{let e=bs(r),i=new t;return i.visit(e),i.found}catch{return Xs.test(r.source)}});return pa(r,e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:mo.EOI_ANCHOR_FOUND,tokenTypes:[e]}))}(r)),t=t.concat(function(e){class t extends Cs{constructor(){super(...arguments),this.found=!1}visitStartAnchor(e){this.found=!0}}let r=aa(e,e=>{let r=e.PATTERN;try{let e=bs(r),i=new t;return i.visit(e),i.found}catch{return zs.test(r.source)}});return pa(r,e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:mo.SOI_ANCHOR_FOUND,tokenTypes:[e]}))}(r)),t=t.concat(function(e){let t=aa(e,e=>{let t=e[Gs];return t instanceof RegExp&&(t.multiline||t.global)});return pa(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:mo.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}))}(r)),t=t.concat(function(e){let t=[],r=pa(e,r=>Ba(e,(e,i)=>(r.PATTERN.source===i.PATTERN.source&&!Oa(t,i)&&i.PATTERN!==No.NA&&(t.push(i),e.push(i)),e),[]));r=Zi(r);let i=aa(r,e=>e.length>1);return pa(i,e=>{let t=pa(e,e=>e.name);return{message:`The same RegExp pattern ->${ua(e).PATTERN}<-has been used in all of the following Token Types: ${t.join(", ")} <-`,type:mo.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}})}(r)),t=t.concat(function(e){let t=aa(e,e=>e.PATTERN.test(""));return pa(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:mo.EMPTY_MATCH_PATTERN,tokenTypes:[e]}))}(r)),t}(a)),r=r.concat(function(e){let t=aa(e,e=>{if(!ga(e,"GROUP"))return!1;let t=e.GROUP;return t!==No.SKIPPED&&t!==No.NA&&!La(t)});return pa(t,e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:mo.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}))}(a)),r=r.concat(function(e,t){let r=aa(e,e=>void 0!==e.PUSH_MODE&&!Oa(t,e.PUSH_MODE));return pa(r,e=>({message:`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-which does not exist`,type:mo.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}))}(a,t)),r=r.concat(function(e){let t=[],r=Ba(e,(e,t,r)=>{let i=t.PATTERN;return i===No.NA||(La(i)?e.push({str:i,idx:r,tokenType:t}):Ua(i)&&function(e){return void 0===ca([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>-1!==e.source.indexOf(t))}(i)&&e.push({str:i.source,idx:r,tokenType:t})),e},[]);return ea(e,(e,i)=>{ea(r,({str:r,idx:n,tokenType:a})=>{if(i<n&&function(e,t){if(Ua(t)){let r=t.exec(e);return null!==r&&0===r.index}if(le(t))return t(e,0,[],{});if(ga(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}(r,e.PATTERN)){let r=`Token: ->${a.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${e.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:r,type:mo.UNREACHABLE_PATTERN,tokenTypes:[e,a]})}})}),t}(a)),r}var Xs=/[^\\][$]/;var zs=/[^\\[][\^]|^\^/;function Qs(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function qs(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Zs(e){let t=e.PATTERN;if(Ua(t))return!1;if(le(t))return!0;if(ga(t,"exec"))return!0;if(La(t))return!1;throw Error("non exhaustive match")}function Js(e){return!(!La(e)||1!==e.length)&&e.charCodeAt(0)}var eo={test:function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let t=e.charCodeAt(r);if(10===t)return this.lastIndex=r+1,!0;if(13===t)return 10===e.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function to(e,t){if(ga(e,"LINE_BREAKS"))return!1;if(Ua(e.PATTERN)){try{js(t,e.PATTERN)}catch(r){return{issue:mo.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}if(La(e.PATTERN))return!1;if(Zs(e))return{issue:mo.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function ro(e,t){if(t.issue===mo.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${e.name}> Token Type\n\t Root cause: ${t.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===mo.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${e.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function io(e){return pa(e,e=>La(e)?e.charCodeAt(0):e)}function no(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}var ao=256,so=[];function oo(e){return e<ao?e:so[e]}function lo(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[r]}function co(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var uo=1,ho={};function po(e){let t=function(e){let t=qi(e),r=e,i=!0;for(;i;){r=Zi(Pr(pa(r,e=>e.CATEGORIES)));let e=zn(r,t);t=t.concat(e),Ia(e)?i=!1:r=e}return t}(e);(function(e){ea(e,e=>{Eo(e)||(ho[uo]=e,e.tokenTypeIdx=uo++),To(e)&&!G(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),To(e)||(e.CATEGORIES=[]),function(e){return ga(e,"categoryMatches")}(e)||(e.categoryMatches=[]),function(e){return ga(e,"categoryMatchesMap")}(e)||(e.categoryMatchesMap={})})})(t),function(e){ea(e,e=>{fo([],e)})}(t),function(e){ea(e,e=>{e.categoryMatches=[],ea(e.categoryMatchesMap,(t,r)=>{e.categoryMatches.push(ho[r].tokenTypeIdx)})})}(t),ea(t,e=>{e.isParent=e.categoryMatches.length>0})}function fo(e,t){ea(e,e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0}),ea(t.CATEGORIES,r=>{let i=e.concat(t);Oa(i,r)||fo(i,r)})}function Eo(e){return ga(e,"tokenTypeIdx")}function To(e){return ga(e,"CATEGORIES")}function Ao(e){return ga(e,"tokenTypeIdx")}var mo,go={buildUnableToPopLexerModeMessage:e=>`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(e,t,r,i,n)=>`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`};!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"}(mo||(mo={}));var Lo={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:go,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Lo);var No=class{constructor(e,t=Lo){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(e,t)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:i,value:n}=Xa(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,n}return t()},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=Pt({},Lo,t);let r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,i=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Lo.lineTerminatorsPattern)this.config.lineTerminatorsPattern=eo;else if(this.config.lineTerminatorCharacters===Lo.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),G(e)?r={modes:{defaultMode:qi(e)},defaultMode:Vs}:(i=!1,r=qi(e))}),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(e){let t=[];return ga(e,Vs)||t.push({message:"A MultiMode Lexer cannot be initialized without a <"+Vs+"> property in its definition\n",type:mo.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),ga(e,Ys)||t.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:mo.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),ga(e,Ys)&&ga(e,Vs)&&!ga(e.modes,e.defaultMode)&&t.push({message:`A MultiMode Lexer cannot be initialized with a ${Vs}: <${e.defaultMode}>which does not exist\n`,type:mo.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),ga(e,Ys)&&ea(e.modes,(e,r)=>{ea(e,(i,n)=>{if(ba(i))t.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${r}> at index: <${n}>\n`,type:mo.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(ga(i,"LONGER_ALT")){let n=G(i.LONGER_ALT)?i.LONGER_ALT:[i.LONGER_ALT];ea(n,n=>{!ba(n)&&!Oa(e,n)&&t.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${n.name}> on token <${i.name}> outside of mode <${r}>\n`,type:mo.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),t}(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(function(e,t,r){let i=[],n=!1,a=Zi(Pr(Sa(e.modes))),s=Da(a,e=>e[Gs]===No.NA),o=io(r);return t&&ea(s,e=>{let t=to(e,o);if(!1!==t){let r={message:ro(e,t),type:t.issue,tokenType:e};i.push(r)}else ga(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(n=!0):js(o,e.PATTERN)&&(n=!0)}),t&&!n&&i.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:mo.NO_LINE_BREAKS_FLAGS}),i}(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},ea(r.modes,(e,t)=>{r.modes[t]=Da(e,e=>ba(e))});let n=bt(r.modes);if(ea(r.modes,(e,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,()=>{if(this.modes.push(r),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Ks(e,n))}),Ia(this.lexerDefinitionErrors)){let i;po(e),this.TRACE_INIT("analyzeTokenTypes",()=>{i=Hs(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[r]=i.patternIdxToConfig,this.charCodeToPatternIdxToConfig[r]=i.charCodeToPatternIdxToConfig,this.emptyGroups=Pt({},this.emptyGroups,i.emptyGroups),this.hasCustom=i.hasCustom||this.hasCustom,this.canModeBeOptimized[r]=i.canBeOptimized}})}),this.defaultMode=r.defaultMode,!Ia(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let e=pa(this.lexerDefinitionErrors,e=>e.message).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+e)}ea(this.lexerDefinitionWarning,e=>{Ka(e.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Ws?(this.chopInput=se,this.match=this.matchWithTest):(this.updateLastIndex=Ie,this.match=this.matchWithExec),i&&(this.handleModes=Ie),!1===this.trackStartLines&&(this.computeNewColumn=se),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=Ie),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let e=Ba(this.canModeBeOptimized,(e,t,r)=>(!1===t&&e.push(r),e),[]);if(t.ensureOptimizations&&!Ia(e))throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{xs={}}),this.TRACE_INIT("toFastProperties",()=>{za(this)})})}tokenize(e,t=this.defaultMode){if(!Ia(this.lexerDefinitionErrors)){let e=pa(this.lexerDefinitionErrors,e=>e.message).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+e)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,i,n,a,s,o,l,c,u,h,p,f,d,E,T,A,m=e,g=m.length,L=0,N=0,S=this.hasCustom?0:Math.floor(e.length/10),_=new Array(S),O=[],R=this.trackStartLines?1:void 0,y=this.trackStartLines?1:void 0,v=function(e){let t={},r=bt(e);return ea(r,r=>{let i=e[r];if(!G(i))throw Error("non exhaustive match");t[r]=[]}),t}(this.emptyGroups),I=this.trackStartLines,C=this.config.lineTerminatorsPattern,x=0,U=[],b=[],M=[],k=[];function P(){return U}function F(e){let t=oo(e),r=b[t];return void 0===r?k:r}Object.freeze(k);let w=e=>{if(1===M.length&&void 0===e.tokenType.PUSH_MODE){let t=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);O.push({offset:e.startOffset,line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{M.pop();let e=Qn(M);U=this.patternIdxToConfig[e],b=this.charCodeToPatternIdxToConfig[e],x=U.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;A=b&&t?F:P}};function B(e){M.push(e),b=this.charCodeToPatternIdxToConfig[e],U=this.patternIdxToConfig[e],x=U.length,x=U.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;A=b&&t?F:P}B.call(this,t);let D,$=this.config.recoveryEnabled;for(;L<g;){o=null;let t=m.charCodeAt(L),S=A(t),b=S.length;for(r=0;r<b;r++){D=S[r];let i=D.pattern;l=null;let u=D.short;if(!1!==u?t===u&&(o=i):!0===D.isCustom?(T=i.exec(m,L,_,v),null!==T?(o=T[0],void 0!==T.payload&&(l=T.payload)):o=null):(this.updateLastIndex(i,L),o=this.match(i,e,L)),null!==o){if(s=D.longerAlt,void 0!==s){let t=s.length;for(n=0;n<t;n++){let t=U[s[n]],r=t.pattern;if(c=null,!0===t.isCustom?(T=r.exec(m,L,_,v),null!==T?(a=T[0],void 0!==T.payload&&(c=T.payload)):a=null):(this.updateLastIndex(r,L),a=this.match(r,e,L)),a&&a.length>o.length){o=a,l=c,D=t;break}}}break}}if(null!==o){if(u=o.length,h=D.group,void 0!==h&&(p=D.tokenTypeIdx,f=this.createTokenInstance(o,L,p,D.tokenType,R,y,u),this.handlePayload(f,l),!1===h?N=this.addToken(_,N,f):v[h].push(f)),e=this.chopInput(e,u),L+=u,y=this.computeNewColumn(y,u),!0===I&&!0===D.canLineTerminator){let e,t,r=0;C.lastIndex=0;do{e=C.test(o),!0===e&&(t=C.lastIndex-1,r++)}while(!0===e);0!==r&&(R+=r,y=u-t,this.updateTokenEndLineColumnLocation(f,h,t,r,R,y,u))}this.handleModes(D,w,B,f)}else{let t=L,r=R,n=y,a=!1===$;for(;!1===a&&L<g;)for(e=this.chopInput(e,1),L++,i=0;i<x;i++){let t=U[i],r=t.pattern,n=t.short;if(!1!==n?m.charCodeAt(L)===n&&(a=!0):!0===t.isCustom?a=null!==r.exec(m,L,_,v):(this.updateLastIndex(r,L),a=null!==r.exec(e)),!0===a)break}if(d=L-t,y=this.computeNewColumn(y,d),E=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(m,t,d,r,n),O.push({offset:t,line:r,column:n,length:d,message:E}),!1===$)break}}return this.hasCustom||(_.length=N),{tokens:_,groups:v,errors:O}}handleModes(e,t,r,i){if(!0===e.pop){let n=e.push;t(i),void 0!==n&&r.call(this,n)}else void 0!==e.push&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,i,n,a,s){let o,l;void 0!==t&&(o=r===s-1,l=o?-1:0,1===i&&!0===o||(e.endLine=n+l,e.endColumn=a-1-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,i){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,t,r,i,n,a){return{image:e,startOffset:t,startLine:n,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,t,r,i,n,a,s){return{image:e,startOffset:t,endOffset:t+s-1,startLine:n,endLine:n,startColumn:a,endColumn:a+s-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,++t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){null!==t&&(e.payload=t)}matchWithTest(e,t,r){return!0===e.test(t)?t.substring(r,e.lastIndex):null}matchWithExec(e,t){let r=e.exec(t);return null!==r?r[0]:null}};function So(e){return _o(e)?e.LABEL:e.name}function _o(e){return La(e.LABEL)&&""!==e.LABEL}No.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",No.NA=/NOT_APPLICABLE/;var Oo="parent",Ro="categories",yo="label",vo="group",Io="push_mode",Co="pop_mode",xo="longer_alt",Uo="line_breaks",bo="start_chars_hint";function Mo(e){return function(e){let t=e.pattern,r={};if(r.name=e.name,ba(t)||(r.PATTERN=t),ga(e,Oo))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return ga(e,Ro)&&(r.CATEGORIES=e[Ro]),po([r]),ga(e,yo)&&(r.LABEL=e[yo]),ga(e,vo)&&(r.GROUP=e[vo]),ga(e,Co)&&(r.POP_MODE=e[Co]),ga(e,Io)&&(r.PUSH_MODE=e[Io]),ga(e,xo)&&(r.LONGER_ALT=e[xo]),ga(e,Uo)&&(r.LINE_BREAKS=e[Uo]),ga(e,bo)&&(r.START_CHARS_HINT=e[bo]),r}(e)}var ko=Mo({name:"EOF",pattern:No.NA});function Po(e,t,r,i,n,a,s,o){return{image:t,startOffset:r,endOffset:i,startLine:n,endLine:a,startColumn:s,endColumn:o,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function Fo(e,t){return lo(e,t)}po([ko]);var wo={buildMismatchTokenMessage:({expected:e,actual:t,previous:r,ruleName:i})=>`Expecting ${_o(e)?`--\x3e ${So(e)} <--`:`token of type --\x3e ${e.name} <--`} but found --\x3e '${t.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:e,ruleName:t})=>"Redundant input, expecting EOF but found: "+e.image,buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:i,ruleName:n}){let a="Expecting: ",s="\nbut found: '"+ua(t).image+"'";if(i)return a+i+s;{let t=Ba(e,(e,t)=>e.concat(t),[]),r=pa(t,e=>`[${pa(e,e=>So(e)).join(", ")}]`);return a+`one of these possible Token sequences:\n${pa(r,(e,t)=>`  ${t+1}. ${e}`).join("\n")}`+s}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:i}){let n="Expecting: ",a="\nbut found: '"+ua(t).image+"'";if(r)return n+r+a;return n+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${pa(e,e=>`[${pa(e,e=>So(e)).join(",")}]`).join(" ,")}>`+a}};Object.freeze(wo);var Bo={buildRuleNotFoundError:(e,t)=>"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"},Do={buildDuplicateFoundError(e,t){let r=e.name,i=ua(t),n=i.idx,a=hs(i),s=(l=i)instanceof os?l.terminalType.name:l instanceof Za?l.nonTerminalName:"",o=`->${a}${n>0?n:""}<- ${s?`with argument: ->${s}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${r}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;var l;return o=o.replace(/[ \t]+/g," "),o=o.replace(/\s\s+/g,"\n"),o},buildNamespaceConflictError:e=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(e){let t=pa(e.prefixPath,e=>So(e)).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(e){let t=pa(e.prefixPath,e=>So(e)).join(", "),r=0===e.alternation.idx?"":e.alternation.idx,i=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return i+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",i},buildEmptyRepetitionError(e){let t=hs(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:e=>"deprecated",buildEmptyAlternationError:e=>`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:e=>`An Alternation cannot have more than 256 alternatives:\n<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(e){let t=e.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${t}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${t} --\x3e ${pa(e.leftRecursionPath,e=>e.name).concat([t]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:e=>"deprecated",buildDuplicateRuleNameError(e){let t;return t=e.topLevelRule instanceof Ja?e.topLevelRule.name:e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};var $o,jo=class extends cs{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ea(Sa(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{let t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:rc.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}},Go=class extends ps{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=qi(this.path.ruleStack).reverse(),this.occurrenceStack=qi(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){Ia(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Vo=class extends Go{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let e=t.concat(r),i=new es({definition:e});this.possibleTokTypes=ds(i),this.found=!0}}},Yo=class extends ps{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Wo=class extends Yo{walkMany(e,t,r){if(e.idx===this.occurrence){let e=ua(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof os&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkMany(e,t,r)}},Ho=class extends Yo{walkManySep(e,t,r){if(e.idx===this.occurrence){let e=ua(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof os&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkManySep(e,t,r)}},Ko=class extends Yo{walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){let e=ua(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof os&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOne(e,t,r)}},Xo=class extends Yo{walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){let e=ua(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof os&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOneSep(e,t,r)}};function zo(e,t,r=[]){r=qi(r);let i=[],n=0;function a(a){let s=zo(function(t){return t.concat(qn(e,n+1))}(a),t,r);return i.concat(s)}for(;r.length<t&&n<e.length;){let t=e[n];if(t instanceof es)return a(t.definition);if(t instanceof Za)return a(t.definition);if(t instanceof ts)i=a(t.definition);else{if(t instanceof rs){return a(t.definition.concat([new ns({definition:t.definition})]))}if(t instanceof is){return a([new es({definition:t.definition}),new ns({definition:[new os({terminalType:t.separator})].concat(t.definition)})])}if(t instanceof as){let e=t.definition.concat([new ns({definition:[new os({terminalType:t.separator})].concat(t.definition)})]);i=a(e)}else if(t instanceof ns){let e=t.definition.concat([new ns({definition:t.definition})]);i=a(e)}else{if(t instanceof ss)return ea(t.definition,e=>{!1===Ia(e.definition)&&(i=a(e.definition))}),i;if(!(t instanceof os))throw Error("non exhaustive match");r.push(t.terminalType)}}n++}return i.push({partialPath:r,suffixDef:qn(e,n)}),i}function Qo(e,t,r,i){let n="EXIT_NONE_TERMINAL",a=[n],s="EXIT_ALTERNATIVE",o=!1,l=t.length,c=l-i-1,u=[],h=[];for(h.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!Ia(h);){let e=h.pop();if(e===s){o&&Qn(h).idx<=c&&h.pop();continue}let i=e.def,p=e.idx,f=e.ruleStack,d=e.occurrenceStack;if(Ia(i))continue;let E=i[0];if(E===n){let e={idx:p,def:qn(i),ruleStack:Zn(f),occurrenceStack:Zn(d)};h.push(e)}else if(E instanceof os)if(p<l-1){let e=p+1;if(r(t[e],E.terminalType)){let t={idx:e,def:qn(i),ruleStack:f,occurrenceStack:d};h.push(t)}}else{if(p!==l-1)throw Error("non exhaustive match");u.push({nextTokenType:E.terminalType,nextTokenOccurrence:E.idx,ruleStack:f,occurrenceStack:d}),o=!0}else if(E instanceof Za){let e=qi(f);e.push(E.nonTerminalName);let t=qi(d);t.push(E.idx);let r={idx:p,def:E.definition.concat(a,qn(i)),ruleStack:e,occurrenceStack:t};h.push(r)}else if(E instanceof ts){let e={idx:p,def:qn(i),ruleStack:f,occurrenceStack:d};h.push(e),h.push(s);let t={idx:p,def:E.definition.concat(qn(i)),ruleStack:f,occurrenceStack:d};h.push(t)}else if(E instanceof rs){let e=new ns({definition:E.definition,idx:E.idx}),t={idx:p,def:E.definition.concat([e],qn(i)),ruleStack:f,occurrenceStack:d};h.push(t)}else if(E instanceof is){let e=new os({terminalType:E.separator}),t=new ns({definition:[e].concat(E.definition),idx:E.idx}),r={idx:p,def:E.definition.concat([t],qn(i)),ruleStack:f,occurrenceStack:d};h.push(r)}else if(E instanceof as){let e={idx:p,def:qn(i),ruleStack:f,occurrenceStack:d};h.push(e),h.push(s);let t=new os({terminalType:E.separator}),r=new ns({definition:[t].concat(E.definition),idx:E.idx}),n={idx:p,def:E.definition.concat([r],qn(i)),ruleStack:f,occurrenceStack:d};h.push(n)}else if(E instanceof ns){let e={idx:p,def:qn(i),ruleStack:f,occurrenceStack:d};h.push(e),h.push(s);let t=new ns({definition:E.definition,idx:E.idx}),r={idx:p,def:E.definition.concat([t],qn(i)),ruleStack:f,occurrenceStack:d};h.push(r)}else if(E instanceof ss)for(let t=E.definition.length-1;t>=0;t--){let e={idx:p,def:E.definition[t].definition.concat(qn(i)),ruleStack:f,occurrenceStack:d};h.push(e),h.push(s)}else if(E instanceof es)h.push({idx:p,def:E.definition.concat(qn(i)),ruleStack:f,occurrenceStack:d});else{if(!(E instanceof Ja))throw Error("non exhaustive match");h.push(qo(E,p,f,d))}}return u}function qo(e,t,r,i){let n=qi(r);n.push(e.name);let a=qi(i);return a.push(1),{idx:t,def:e.definition,ruleStack:n,occurrenceStack:a}}function Zo(e){if(e instanceof ts||"Option"===e)return $o.OPTION;if(e instanceof ns||"Repetition"===e)return $o.REPETITION;if(e instanceof rs||"RepetitionMandatory"===e)return $o.REPETITION_MANDATORY;if(e instanceof is||"RepetitionMandatoryWithSeparator"===e)return $o.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof as||"RepetitionWithSeparator"===e)return $o.REPETITION_WITH_SEPARATOR;if(e instanceof ss||"Alternation"===e)return $o.ALTERNATION;throw Error("non exhaustive match")}function Jo(e,t,r,i){let n=e.length,a=ia(e,e=>ia(e,e=>1===e.length));if(t)return function(t){let i=pa(t,e=>e.GATE);for(let a=0;a<n;a++){let t=e[a],n=t.length,s=i[a];if(void 0===s||!1!==s.call(this))e:for(let e=0;e<n;e++){let i=t[e],n=i.length;for(let e=0;e<n;e++){let t=this.LA(e+1);if(!1===r(t,i[e]))continue e}return a}}};if(a&&!i){let t=pa(e,e=>Pr(e)),r=Ba(t,(e,t,r)=>(ea(t,t=>{ga(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r),ea(t.categoryMatches,t=>{ga(e,t)||(e[t]=r)})}),e),{});return function(){let e=this.LA(1);return r[e.tokenTypeIdx]}}return function(){for(let t=0;t<n;t++){let i=e[t],n=i.length;e:for(let e=0;e<n;e++){let n=i[e],a=n.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(!1===r(t,n[e]))continue e}return t}}}}function el(e,t,r){let i=ia(e,e=>1===e.length),n=e.length;if(i&&!r){let t=Pr(e);if(1===t.length&&Ia(t[0].categoryMatches)){let e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{let e=Ba(t,(e,t,r)=>(e[t.tokenTypeIdx]=!0,ea(t.categoryMatches,t=>{e[t]=!0}),e),[]);return function(){let t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){e:for(let r=0;r<n;r++){let i=e[r],n=i.length;for(let e=0;e<n;e++){let r=this.LA(e+1);if(!1===t(r,i[e]))continue e}return!0}return!1}}!function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}($o||($o={}));var tl=class extends ps{constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=r.concat(i),!0)}walkOption(e,t,r){this.checkIsTarget(e,$o.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,$o.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,$o.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,$o.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,$o.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}},rl=class extends cs{constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(void 0===this.targetRef||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,$o.OPTION)}visitRepetition(e){this.checkIsTarget(e,$o.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,$o.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,$o.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,$o.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,$o.ALTERNATION)}};function il(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function nl(e){let t=[""];for(let r=0;r<e.length;r++){let i=e[r],n=[];for(let e=0;e<t.length;e++){let r=t[e];n.push(r+"_"+i.tokenTypeIdx);for(let e=0;e<i.categoryMatches.length;e++){let t="_"+i.categoryMatches[e];n.push(r+t)}}t=n}return t}function al(e,t,r){for(let i=0;i<e.length;i++){if(i===r)continue;let n=e[i];for(let e=0;e<t.length;e++){if(!0===n[t[e]])return!1}}return!0}function sl(e,t){let r=pa(e,e=>zo([e],1)),i=il(r.length),n=pa(r,e=>{let t={};return ea(e,e=>{let r=nl(e.partialPath);ea(r,e=>{t[e]=!0})}),t}),a=r;for(let s=1;s<=t;s++){let e=a;a=il(e.length);for(let r=0;r<e.length;r++){let o=e[r];for(let e=0;e<o.length;e++){let l=o[e].partialPath,c=o[e].suffixDef,u=nl(l);if(al(n,u,r)||Ia(c)||l.length===t){let e=i[r];if(!1===cl(e,l)){e.push(l);for(let e=0;e<u.length;e++){let t=u[e];n[r][t]=!0}}}else{let e=zo(c,s+1,l);a[r]=a[r].concat(e),ea(e,e=>{let t=nl(e.partialPath);ea(t,e=>{n[r][e]=!0})})}}}}return i}function ol(e,t,r,i){let n=new rl(e,$o.ALTERNATION,i);return t.accept(n),sl(n.result,r)}function ll(e,t,r,i){let n=new rl(e,r);t.accept(n);let a=n.result,s=new tl(t,e,r).startWalking();return sl([new es({definition:a}),new es({definition:s})],i)}function cl(e,t){e:for(let r=0;r<e.length;r++){let i=e[r];if(i.length===t.length){for(let e=0;e<i.length;e++){let r=t[e],n=i[e];if(!1==(r===n||void 0!==n.categoryMatchesMap[r.tokenTypeIdx]))continue e}return!0}}return!1}function ul(e){return ia(e,e=>ia(e,e=>ia(e,e=>Ia(e.categoryMatches))))}function hl(e,t,r,i){let n=fa(e,e=>function(e,t){let r=new dl;e.accept(r);let i=r.allProductions,n=Ta(i,pl),a=Fa(n,e=>e.length>1);return pa(Sa(a),r=>{let i=ua(r),n=t.buildDuplicateFoundError(e,r),a=hs(i),s={message:n,type:rc.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:i.idx},o=fl(i);return o&&(s.parameter=o),s})}(e,r)),a=function(e,t,r){let i=[],n=pa(t,e=>e.name);return ea(e,e=>{let t=e.name;if(Oa(n,t)){let n=r.buildNamespaceConflictError(e);i.push({message:n,type:rc.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}}),i}(e,t,r),s=fa(e,e=>function(e,t){let r=new Al;e.accept(r);let i=r.alternations;return fa(i,r=>r.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:rc.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}]:[])}(e,r)),o=fa(e,t=>function(e,t,r,i){let n=[];if(Ba(t,(t,r)=>r.name===e.name?t+1:t,0)>1){let t=i.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});n.push({message:t,type:rc.DUPLICATE_RULE_NAME,ruleName:e.name})}return n}(t,e,i,r));return n.concat(a,s,o)}function pl(e){return`${hs(e)}_#_${e.idx}_#_${fl(e)}`}function fl(e){return e instanceof os?e.terminalType.name:e instanceof Za?e.nonTerminalName:""}var dl=class extends cs{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function El(e,t,r,i=[]){let n=[],a=Tl(t.definition);if(Ia(a))return[];{let t=e.name;Oa(a,e)&&n.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:i}),type:rc.LEFT_RECURSION,ruleName:t});let s=zn(a,i.concat([e])),o=fa(s,t=>{let n=qi(i);return n.push(t),El(e,t,r,n)});return n.concat(o)}}function Tl(e){let t=[];if(Ia(e))return t;let r=ua(e);if(r instanceof Za)t.push(r.referencedRule);else if(r instanceof es||r instanceof ts||r instanceof rs||r instanceof is||r instanceof as||r instanceof ns)t=t.concat(Tl(r.definition));else if(r instanceof ss)t=Pr(pa(r.definition,e=>Tl(e.definition)));else if(!(r instanceof os))throw Error("non exhaustive match");let i=us(r),n=e.length>1;if(i&&n){let r=qn(e);return t.concat(Tl(r))}return t}var Al=class extends cs{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function ml(e,t,r){let i=new Al;e.accept(i);let n=i.alternations;return n=Da(n,e=>!0===e.ignoreAmbiguities),fa(n,i=>{let n=i.idx,a=i.maxLookahead||t,s=ol(n,e,a,i),o=function(e,t,r,i){let n=[],a=Ba(e,(r,i,a)=>(!0===t.definition[a].ignoreAmbiguities||ea(i,i=>{let s=[a];ea(e,(e,r)=>{a!==r&&cl(e,i)&&!0!==t.definition[r].ignoreAmbiguities&&s.push(r)}),s.length>1&&!cl(n,i)&&(n.push(i),r.push({alts:s,path:i}))}),r),[]);return pa(a,e=>{let n=pa(e.alts,e=>e+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:n,prefixPath:e.path}),type:rc.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:e.alts}})}(s,i,e,r),l=function(e,t,r,i){let n=Ba(e,(e,t,r)=>{let i=pa(t,e=>({idx:r,path:e}));return e.concat(i)},[]);return Zi(fa(n,e=>{if(!0===t.definition[e.idx].ignoreAmbiguities)return[];let a=e.idx,s=e.path,o=aa(n,e=>!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<a&&function(e,t){return e.length<t.length&&ia(e,(e,r)=>{let i=t[r];return e===i||i.categoryMatchesMap[e.tokenTypeIdx]})}(e.path,s));return pa(o,e=>{let n=[e.idx+1,a+1],s=0===t.idx?"":t.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:n,prefixPath:e.path}),type:rc.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:s,alternatives:n}})}))}(s,i,e,r);return o.concat(l)})}var gl=class extends cs{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function Ll(e){let t=Yn(e,{errMsgProvider:Bo}),r={};return ea(e.rules,e=>{r[e.name]=e}),function(e,t){let r=new jo(e,t);return r.resolveRefs(),r.errors}(r,t.errMsgProvider)}var Nl="MismatchedTokenException",Sl="NoViableAltException",_l="EarlyExitException",Ol="NotAllInputParsedException",Rl=[Nl,Sl,_l,Ol];function yl(e){return Oa(Rl,e.name)}Object.freeze(Rl);var vl=class extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Il=class extends vl{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Nl}},Cl=class extends vl{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Sl}},xl=class extends vl{constructor(e,t){super(e,t),this.name=Ol}},Ul=class extends vl{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=_l}},bl={},Ml="InRuleRecoveryException",kl=class extends Error{constructor(e){super(e),this.name=Ml}};function Pl(e,t,r,i,n,a,s){let o=this.getKeyForAutomaticLookahead(i,n),l=this.firstAfterRepMap[o];if(void 0===l){let e=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[e],n).startWalking(),this.firstAfterRepMap[o]=l}let c=l.token,u=l.occurrence,h=l.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===c&&(c=ko,u=1),void 0!==c&&void 0!==u&&this.shouldInRepetitionRecoveryBeTried(c,u,s)&&this.tryInRepetitionRecovery(e,t,r,c)}function Fl(e,t,r){return r|t|e}var wl=class{constructor(e){var t;this.maxLookahead=null!==(t=e?.maxLookahead)&&void 0!==t?t:ic.maxLookahead}validate(e){let t=this.validateNoLeftRecursion(e.rules);if(Ia(t)){let r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),n=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...i,...n]}return t}validateNoLeftRecursion(e){return fa(e,e=>El(e,e,Do))}validateEmptyOrAlternatives(e){return fa(e,e=>function(e,t){let r=new Al;e.accept(r);let i=r.alternations;return fa(i,r=>{let i=Zn(r.definition);return fa(i,(i,n)=>{let a=Qo([i],[],lo,1);return Ia(a)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:n}),type:rc.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:n+1}]:[]})})}(e,Do))}validateAmbiguousAlternationAlternatives(e,t){return fa(e,e=>ml(e,t,Do))}validateSomeNonEmptyLookaheadPath(e,t){return function(e,t,r){let i=[];return ea(e,e=>{let n=new gl;e.accept(n);let a=n.allProductions;ea(a,n=>{let a=Zo(n),s=n.maxLookahead||t,o=ll(n.idx,e,a,s)[0];if(Ia(Pr(o))){let t=r.buildEmptyRepetitionError({topLevelRule:e,repetition:n});i.push({message:t,type:rc.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}})}),i}(e,t,Do)}buildLookaheadForAlternation(e){return function(e,t,r,i,n,a){let s=ol(e,t,r);return a(s,i,ul(s)?co:lo,n)}(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Jo)}buildLookaheadForOptional(e){return function(e,t,r,i,n,a){let s=ll(e,t,n,r),o=ul(s)?co:lo;return a(s[0],o,i)}(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Zo(e.prodType),el)}},Bl=new class extends cs{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}};function Dl(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function $l(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}var jl;function Gl(e,t){Object.defineProperty(e,"name",{enumerable:!1,configurable:!0,writable:!1,value:t})}function Vl(e,t){let r=bt(e),i=r.length;for(let n=0;n<i;n++){let i=e[r[n]],a=i.length;for(let e=0;e<a;e++){let r=i[e];void 0===r.tokenTypeIdx&&this[r.name](r.children,t)}}}function Yl(e,t){let r=function(){};Gl(r,e+"BaseSemantics");let i={visit:function(e,t){if(G(e)&&(e=e[0]),!ba(e))return this[e.name](e.children,t)},validateVisitor:function(){let e=function(e,t){return function(e,t){let r=aa(t,t=>!1===le(e[t])),i=pa(r,t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:jl.MISSING_METHOD,methodName:t}));return Zi(i)}(e,t)}(this,t);if(!Ia(e)){let t=pa(e,e=>e.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}};return(r.prototype=i).constructor=r,r._RULE_NAMES=t,r}!function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(jl||(jl={}));var Wl={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Wl);var Hl=!0,Kl=Math.pow(2,8)-1,Xl=Mo({name:"RECORDING_PHASE_TOKEN",pattern:No.NA});po([Xl]);var zl=Po(Xl,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(zl);var Ql={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};function ql(e,t,r,i=!1){ec(r);let n=Qn(this.recordingProdStack),a=le(t)?t:t.DEF,s=new e({definition:[],idx:r});return i&&(s.separator=t.SEP),ga(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),n.definition.push(s),this.recordingProdStack.pop(),Wl}function Zl(e,t){ec(t);let r=Qn(this.recordingProdStack),i=!1===G(e),n=!1===i?e:e.DEF,a=new ss({definition:[],idx:t,ignoreAmbiguities:i&&!0===e.IGNORE_AMBIGUITIES});ga(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);let s=ja(n,e=>le(e.GATE));return a.hasPredicates=s,r.definition.push(a),ea(n,e=>{let t=new es({definition:[]});a.definition.push(t),ga(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:ga(e,"GATE")&&(t.ignoreAmbiguities=!0),this.recordingProdStack.push(t),e.ALT.call(this),this.recordingProdStack.pop()}),Wl}function Jl(e){return 0===e?"":`${e}`}function ec(e){if(e<0||e>Kl){let t=new Error(`Invalid DSL Method idx value: <${e}>\n\tIdx value must be a none negative value smaller than ${Kl+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}var tc=Po(ko,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(tc);var rc,ic=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:wo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),nc=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});!function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(rc||(rc={}));var ac=class e{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{za(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ea(this.definedRulesNames,e=>{let t,r=this[e].originalGrammarAction;this.TRACE_INIT(`${e} Rule`,()=>{t=this.topLevelRuleRecord(e,r)}),this.gastProductionsCache[e]=t})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=Ll({rules:Sa(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ia(i)&&!1===this.skipValidations){let e=function(e){return hl((e=Yn(e,{errMsgProvider:Do})).rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}({rules:Sa(this.gastProductionsCache),tokenTypes:Sa(this.tokensMap),errMsgProvider:Do,grammarName:r}),t=function(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return pa(t,e=>Object.assign({type:rc.CUSTOM_LOOKAHEAD_VALIDATION},e))}({lookaheadStrategy:this.lookaheadStrategy,rules:Sa(this.gastProductionsCache),tokenTypes:Sa(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(e,t)}}),Ia(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let e=function(e){let t={};return ea(e,e=>{let r=new Ts(e).startWalking();Pt(t,r)}),t}(Sa(this.gastProductionsCache));this.resyncFollows=e}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var e,t;null===(t=(e=this.lookaheadStrategy).initialize)||void 0===t||t.call(e,{rules:Sa(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Sa(this.gastProductionsCache))})),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!Ia(this.definitionErrors))throw t=pa(this.definitionErrors,e=>e.message),new Error(`Parser Definition Errors detected:\n ${t.join("\n-------------------------------\n")}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(t),r.initLexerAdapter(),r.initLooksAhead(t),r.initRecognizerEngine(e,t),r.initRecoverable(t),r.initTreeBuilder(t),r.initContentAssist(),r.initGastRecorder(t),r.initPerformanceTracer(t),ga(t,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=ga(t,"skipValidations")?t.skipValidations:ic.skipValidations}};ac.DEFER_DEFINITION_ERRORS_HANDLING=!1,function(e,t){t.forEach(t=>{let r=t.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if("constructor"===i)return;let n=Object.getOwnPropertyDescriptor(r,i);n&&(n.get||n.set)?Object.defineProperty(e.prototype,i,n):e.prototype[i]=t.prototype[i]})})}(ac,[class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=ga(e,"recoveryEnabled")?e.recoveryEnabled:ic.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Pl)}getTokenToInsert(e){let t=Po(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,i){let n=this.findReSyncTokenType(),a=this.exportLexerState(),s=[],o=!1,l=this.LA(1),c=this.LA(1),u=()=>{let e=this.LA(0),t=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:e,ruleName:this.getCurrRuleFullName()}),r=new Il(t,l,this.LA(0));r.resyncedTokens=Zn(s),this.SAVE_ERROR(r)};for(;!o;){if(this.tokenMatcher(c,i))return void u();if(r.call(this))return u(),void e.apply(this,t);this.tokenMatcher(c,n)?o=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,s))}this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(!1===r||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){let r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let e=this.SKIP_TOKEN();return this.consumeToken(),e}throw new kl("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ia(t))return!1;let r=this.LA(1);return void 0!==ca(t,e=>this.tokenMatcher(r,e))}canRecoverWithSingleTokenDeletion(e){return!!this.canTokenTypeBeDeletedInRecovery(e)&&this.tokenMatcher(this.LA(2),e)}isInCurrentRuleReSyncSet(e){let t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return Oa(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),t=this.LA(1),r=2;for(;;){let i=ca(e,e=>Fo(t,e));if(void 0!==i)return i;t=this.LA(r),r++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return bl;let e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return pa(e,(r,i)=>0===i?bl:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=pa(this.buildFullFollowKeyStack(),e=>this.getFollowSetFromFollowKey(e));return Pr(e)}getFollowSetFromFollowKey(e){if(e===bl)return[ko];let t=e.ruleName+e.idxInCallingRule+Es+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,ko)||t.push(e),t}reSyncTo(e){let t=[],r=this.LA(1);for(;!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return Zn(t)}attemptInRepetitionRecovery(e,t,r,i,n,a,s){}getCurrentGrammarPath(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:qi(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return pa(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}},class{initLooksAhead(e){this.dynamicTokensEnabled=ga(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ic.dynamicTokensEnabled,this.maxLookahead=ga(e,"maxLookahead")?e.maxLookahead:ic.maxLookahead,this.lookaheadStrategy=ga(e,"lookaheadStrategy")?e.lookaheadStrategy:new wl({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ea(e,e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,()=>{let{alternation:t,repetition:r,option:i,repetitionMandatory:n,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:s}=function(e){Bl.reset(),e.accept(Bl);let t=Bl.dslMethods;return Bl.reset(),t}(e);ea(t,t=>{let r=0===t.idx?"":t.idx;this.TRACE_INIT(`${hs(t)}${r}`,()=>{let r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),i=Fl(this.fullRuleNameToShort[e.name],256,t.idx);this.setLaFuncCache(i,r)})}),ea(r,t=>{this.computeLookaheadFunc(e,t.idx,768,"Repetition",t.maxLookahead,hs(t))}),ea(i,t=>{this.computeLookaheadFunc(e,t.idx,512,"Option",t.maxLookahead,hs(t))}),ea(n,t=>{this.computeLookaheadFunc(e,t.idx,1024,"RepetitionMandatory",t.maxLookahead,hs(t))}),ea(a,t=>{this.computeLookaheadFunc(e,t.idx,1536,"RepetitionMandatoryWithSeparator",t.maxLookahead,hs(t))}),ea(s,t=>{this.computeLookaheadFunc(e,t.idx,1280,"RepetitionWithSeparator",t.maxLookahead,hs(t))})})})}computeLookaheadFunc(e,t,r,i,n,a){this.TRACE_INIT(`${a}${0===t?"":t}`,()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:n||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),s=Fl(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(s,a)})}getKeyForAutomaticLookahead(e,t){return Fl(this.getLastExplicitRuleShortName(),e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=ga(e,"nodeLocationTracking")?e.nodeLocationTracking:ic.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=$l,this.setNodeLocationFromNode=$l,this.cstPostRule=Ie,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Ie,this.setNodeLocationFromNode=Ie,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Dl,this.setNodeLocationFromNode=Dl,this.cstPostRule=Ie,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Ie,this.setNodeLocationFromNode=Ie,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);this.setNodeLocationFromToken=Ie,this.setNodeLocationFromNode=Ie,this.cstPostRule=Ie,this.setInitialNodeLocation=Ie}else this.cstInvocationStateUpdate=Ie,this.cstFinallyStateUpdate=Ie,this.cstPostTerminal=Ie,this.cstPostNonTerminal=Ie,this.cstPostRule=Ie}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];(function(e,t,r){void 0===e.children[r]?e.children[r]=[t]:e.children[r].push(t)})(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];(function(e,t,r){void 0===e.children[t]?e.children[t]=[r]:e.children[t].push(r)})(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(ba(this.baseCstVisitorConstructor)){let e=Yl(this.className,bt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(ba(this.baseCstVisitorWithDefaultsConstructor)){let e=function(e,t,r){let i=function(){};Gl(i,e+"BaseSemanticsWithDefaults");let n=Object.create(r.prototype);return ea(t,e=>{n[e]=Vl}),(i.prototype=n).constructor=i,i}(this.className,bt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):tc}LA(e){let t=this.currIdx+e;return t<0||this.tokVectorLength<=t?tc:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},class{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=co,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},ga(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(G(e)){if(Ia(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(G(e))this.tokensMap=Ba(e,(e,t)=>(e[t.name]=t,e),{});else if(ga(e,"modes")&&ia(Pr(Sa(e.modes)),Ao)){let t=Pr(Sa(e.modes)),r=Wa(t);this.tokensMap=Ba(r,(e,t)=>(e[t.name]=t,e),{})}else{if(!q(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=qi(e)}this.tokensMap.EOF=ko;let r=ga(e,"modes")?Pr(Sa(e.modes)):Sa(e),i=ia(r,e=>Ia(e.categoryMatches));this.tokenMatcher=i?co:lo,po(Sa(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i,n=ga(r,"resyncEnabled")?r.resyncEnabled:nc.resyncEnabled,a=ga(r,"recoveryValueFunc")?r.recoveryValueFunc:nc.recoveryValueFunc,s=this.ruleShortNameIdx<<12;return this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s,i=!0===this.outputCst?function(...r){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),t.apply(this,r);let i=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(i),i}catch(i){return this.invokeRuleCatch(i,n,a)}finally{this.ruleFinallyStateUpdate()}}:function(...r){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),t.apply(this,r)}catch(i){return this.invokeRuleCatch(i,n,a)}finally{this.ruleFinallyStateUpdate()}},Object.assign(i,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){let i=1===this.RULE_STACK.length,n=t&&!this.isBackTracking()&&this.recoveryEnabled;if(yl(e)){let t=e;if(n){let i=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(i)){if(t.resyncedTokens=this.reSyncTo(i),this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];return e.recoveredNode=!0,e}return r(e)}if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0,t.partialCstResult=e}throw t}if(i)return this.moveToTerminatedState(),r(e);throw t}throw e}optionInternal(e,t){let r=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof e){i=e.DEF;let t=e.GATE;if(void 0!==t){let e=n;n=()=>t.call(this)&&e.call(this)}}else i=e;if(!0===n.call(this))return i.call(this)}atLeastOneInternal(e,t){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof t){i=t.DEF;let e=t.GATE;if(void 0!==e){let t=n;n=()=>e.call(this)&&t.call(this)}}else i=t;if(!0!==n.call(this))throw this.raiseEarlyExitException(e,$o.REPETITION_MANDATORY,t.ERR_MSG);{let e=this.doSingleRepetition(i);for(;!0===n.call(this)&&!0===e;)e=this.doSingleRepetition(i)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],n,1024,e,Ko)}atLeastOneSepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){let i=t.DEF,n=t.SEP;if(!0!==this.getLaFuncFromCache(r).call(this))throw this.raiseEarlyExitException(e,$o.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);{i.call(this);let t=()=>this.tokenMatcher(this.LA(1),n);for(;!0===this.tokenMatcher(this.LA(1),n);)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,t,i,Xo],t,1536,e,Xo)}}manyInternal(e,t){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof t){i=t.DEF;let e=t.GATE;if(void 0!==e){let t=n;n=()=>e.call(this)&&t.call(this)}}else i=t;let a=!0;for(;!0===n.call(this)&&!0===a;)a=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],n,768,e,Wo,a)}manySepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){let i=t.DEF,n=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){i.call(this);let t=()=>this.tokenMatcher(this.LA(1),n);for(;!0===this.tokenMatcher(this.LA(1),n);)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,t,i,Ho],t,1280,e,Ho)}}repetitionSepSecondInternal(e,t,r,i,n){for(;r();)this.CONSUME(t),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,i,n],r,1536,e,n)}doSingleRepetition(e){let t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){let r=this.getKeyForAutomaticLookahead(256,t),i=G(e)?e:e.DEF,n=this.getLaFuncFromCache(r).call(this,i);if(void 0!==n)return i[n].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new xl(t,e))}}subruleInternal(e,t,r){let i;try{let n=void 0!==r?r.ARGS:void 0;return this.subruleIdx=t,i=e.apply(this,n),this.cstPostNonTerminal(i,void 0!==r&&void 0!==r.LABEL?r.LABEL:e.ruleName),i}catch(n){throw this.subruleInternalError(n,r,e.ruleName)}}subruleInternalError(e,t,r){throw yl(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let i;try{let t=this.LA(1);!0===this.tokenMatcher(t,e)?(this.consumeToken(),i=t):this.consumeInternalError(e,t,r)}catch(n){i=this.consumeInternalRecovery(e,t,n)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:e.name,i),i}consumeInternalError(e,t,r){let i,n=this.LA(0);throw i=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:n,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Il(i,t,n))}consumeInternalRecovery(e,t,r){if(!this.recoveryEnabled||"MismatchedTokenException"!==r.name||this.isBackTracking())throw r;{let n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(i){throw i.name===Ml?r:i}}}saveRecogState(){let e=this.errors,t=qi(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),ko)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},class{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=nc){if(Oa(this.definedRulesNames,e)){let t={message:Do.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:rc.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(t)}this.definedRulesNames.push(e);let i=this.defineRule(e,t,r);return this[e]=i,i}OVERRIDE_RULE(e,t,r=nc){let i=function(e,t,r){let i,n=[];return Oa(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:rc.INVALID_RULE_OVERRIDE,ruleName:e})),n}(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let n=this.defineRule(e,t,r);return this[e]=n,n}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,t),!0}catch(i){if(yl(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return function(e){return pa(e,ls)}(Sa(this.gastProductionsCache))}},class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=ga(e,"errorMessageProvider")?e.errorMessageProvider:ic.errorMessageProvider}SAVE_ERROR(e){if(yl(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:qi(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return qi(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){let i=this.getCurrRuleFullName(),n=ll(e,this.getGAstProductions()[i],t,this.maxLookahead)[0],a=[];for(let o=1;o<=this.maxLookahead;o++)a.push(this.LA(o));let s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:n,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Ul(s,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){let r=this.getCurrRuleFullName(),i=ol(e,this.getGAstProductions()[r],this.maxLookahead),n=[];for(let o=1;o<=this.maxLookahead;o++)n.push(this.LA(o));let a=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:n,previous:a,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Cl(s,this.LA(1),a))}},class{initContentAssist(){}computeContentAssist(e,t){let r=this.gastProductionsCache[e];if(ba(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Qo([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let t=ua(e.ruleStack),r=this.getGAstProductions()[t];return new Vo(r,e).startWalking()}},class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(t,r){return this.consumeInternalRecord(t,e,r)},this[`SUBRULE${t}`]=function(t,r){return this.subruleInternalRecord(t,e,r)},this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)},this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)},this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)},this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)},this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)},this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return tc}topLevelRuleRecord(e,t){try{let r=new Ja({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(r){if(!0!==r.KNOWN_RECORDER_ERROR)try{r.message=r.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch{throw r}throw r}}optionInternalRecord(e,t){return ql.call(this,ts,e,t)}atLeastOneInternalRecord(e,t){ql.call(this,rs,t,e)}atLeastOneSepFirstInternalRecord(e,t){ql.call(this,is,t,e,Hl)}manyInternalRecord(e,t){ql.call(this,ns,t,e)}manySepFirstInternalRecord(e,t){ql.call(this,as,t,e,Hl)}orInternalRecord(e,t){return Zl.call(this,e,t)}subruleInternalRecord(e,t,r){if(ec(t),!e||!1===ga(e,"ruleName")){let r=new Error(`<SUBRULE${Jl(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let i=Qn(this.recordingProdStack),n=e.ruleName,a=new Za({idx:t,nonTerminalName:n,label:r?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Ql:Wl}consumeInternalRecord(e,t,r){if(ec(t),!Eo(e)){let r=new Error(`<CONSUME${Jl(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let i=Qn(this.recordingProdStack),n=new os({idx:t,terminalType:e,label:r?.LABEL});return i.definition.push(n),zl}},class{initPerformanceTracer(e){if(ga(e,"traceInitPerf")){let t=e.traceInitPerf,r="number"==typeof t;this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=ic.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:i,value:n}=Xa(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,n}return t()}}]);var sc=class extends ac{constructor(e,t=ic){let r=qi(t);r.outputCst=!0,super(e,r)}},oc=Mo({name:"KeywordReserved",pattern:No.NA}),lc=Mo({name:"Keyword",pattern:No.NA}),cc=Mo({name:"DateFunction",pattern:No.NA}),uc=Mo({name:"AggregateFunction",pattern:No.NA}),hc=Mo({name:"LocationFunction",pattern:No.NA}),pc=Mo({name:"FieldsFunction",pattern:No.NA}),fc=Mo({name:"FieldsFunctionParamIdentifier",pattern:No.NA}),dc=Mo({name:"OtherFunction",pattern:No.NA}),Ec=Mo({name:"DateLiteral",pattern:No.NA}),Tc=Mo({name:"DateLiteralNotIdentifier",pattern:No.NA}),Ac=Mo({name:"DateNLiteral",pattern:No.NA}),mc=Mo({name:"RelationalOperator",pattern:No.NA}),gc=Mo({name:"SymbolIdentifier",pattern:No.NA}),Lc=Mo({name:"DateIdentifier",pattern:No.NA}),Nc=Mo({name:"NumberIdentifier",pattern:No.NA}),Sc=Mo({name:"DecimalNumberIdentifier",pattern:No.NA}),_c=Mo({name:"IntegerNumberIdentifier",pattern:No.NA}),Oc=Mo({name:"IdentifierNotKeyword",pattern:No.NA}),Rc=Mo({name:"UsingScopeEnumeration",pattern:No.NA}),yc=Mo({name:"RParenMismatch",pattern:No.NA}),vc=/[a-zA-Z][a-zA-Z0-9_.]*/y;var Ic=Mo({name:"Identifier",pattern:function(e,t){vc.lastIndex=t;let r=vc.exec(e);return r&&r[0].includes("..")?null:r},line_breaks:!1,categories:[Oc],start_chars_hint:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}),Cc=Mo({name:"StringIdentifier",line_breaks:!0,pattern:/(')(?:(?=(\\?))\2.)*?\1/}),xc=Mo({name:"WhiteSpace",pattern:/\s+/,group:No.SKIPPED}),Uc=Mo({name:"AND",pattern:/AND/i,longer_alt:Ic,categories:[lc,oc]}),bc=Mo({name:"AS",pattern:/AS/i,longer_alt:Ic,categories:[lc,oc]}),Mc=Mo({name:"DESC",pattern:/DESC/i,longer_alt:Ic,categories:[lc,oc]}),kc=Mo({name:"ASC",pattern:/ASC/i,longer_alt:Ic,categories:[lc,oc]}),Pc=Mo({name:"ORDER_BY",pattern:/ORDER BY/i,longer_alt:Ic}),Fc=Mo({name:"CUBE",pattern:/CUBE/i,longer_alt:Ic,categories:[lc,oc]}),wc=Mo({name:"ELSE",pattern:/ELSE/i,longer_alt:Ic,categories:[lc,oc]}),Bc=Mo({name:"EXCLUDES",pattern:/EXCLUDES/i,longer_alt:Ic,categories:[lc,oc]}),Dc=Mo({name:"FALSE",pattern:/FALSE/i,longer_alt:Ic,categories:[lc,oc]}),$c=Mo({name:"FIRST",pattern:/FIRST/i,longer_alt:Ic,categories:[lc,oc]}),jc=Mo({name:"FROM",pattern:/FROM/i,longer_alt:Ic,categories:[lc,oc]}),Gc=Mo({name:"GROUP_BY",pattern:/GROUP BY/i,longer_alt:Ic}),Vc=Mo({name:"HAVING",pattern:/HAVING/i,longer_alt:Ic,categories:[lc,oc]}),Yc=Mo({name:"IN",pattern:/IN/i,longer_alt:Ic,categories:[lc,oc]}),Wc=Mo({name:"INCLUDES",pattern:/INCLUDES/i,longer_alt:Ic,categories:[lc,oc]}),Hc=Mo({name:"LAST",pattern:/LAST/i,longer_alt:Ic,categories:[lc,oc]}),Kc=Mo({name:"LIKE",pattern:/LIKE/i,longer_alt:Ic,categories:[lc,oc]}),Xc=Mo({name:"LIMIT",pattern:/LIMIT/i,longer_alt:Ic,categories:[lc,oc]}),zc=Mo({name:"NOT",pattern:/NOT/i,longer_alt:Ic,categories:[lc,oc]}),Qc=Mo({name:"NULL",pattern:/NULL/i,longer_alt:Ic,categories:[lc,oc]}),qc=Mo({name:"NULLS",pattern:/NULLS/i,longer_alt:Ic,categories:[lc,oc]}),Zc=Mo({name:"OR",pattern:/OR/i,longer_alt:Ic,categories:[lc,oc]}),Jc=Mo({name:"ROLLUP",pattern:/ROLLUP/i,longer_alt:Ic,categories:[lc,oc]}),eu=Mo({name:"SELECT",pattern:/SELECT/i,longer_alt:Ic,categories:[lc,oc]}),tu=Mo({name:"TRUE",pattern:/TRUE/i,longer_alt:Ic,categories:[lc,oc]}),ru=Mo({name:"USING",pattern:/USING/i,longer_alt:Ic,categories:[lc,oc]}),iu=Mo({name:"WHERE",pattern:/WHERE/i,longer_alt:Ic,categories:[lc,oc]}),nu=Mo({name:"WITH",pattern:/WITH/i,longer_alt:Ic,categories:[lc,oc]}),au=Mo({name:"FOR",pattern:/FOR/i,longer_alt:Ic,categories:[lc,oc]}),su=Mo({name:"UPDATE",pattern:/UPDATE/i,longer_alt:Ic,categories:[lc,oc]}),ou=Mo({name:"ABOVE",pattern:/ABOVE/i,longer_alt:Ic,categories:[lc,Ic]}),lu=Mo({name:"ABOVE_OR_BELOW",pattern:/ABOVE_OR_BELOW/i,longer_alt:Ic,categories:[lc,Ic]}),cu=Mo({name:"new",pattern:/new/i,longer_alt:Ic,categories:[lc,Ic]}),uu=Mo({name:"AT",pattern:/AT/i,longer_alt:Ic,categories:[lc,Ic]}),hu=Mo({name:"BELOW",pattern:/BELOW/i,longer_alt:Ic,categories:[lc,Ic]}),pu=Mo({name:"DATA_CATEGORY",pattern:/DATA CATEGORY/i,longer_alt:Ic,categories:[lc]}),fu=Mo({name:"END",pattern:/END/i,longer_alt:Ic,categories:[lc,Ic]}),du=Mo({name:"OFFSET",pattern:/OFFSET/i,longer_alt:Ic,categories:[lc,Ic]}),Eu=Mo({name:"REFERENCE",pattern:/REFERENCE/i,longer_alt:Ic,categories:[lc,Ic]}),Tu=Mo({name:"SCOPE",pattern:/SCOPE/i,longer_alt:Ic,categories:[lc,Ic]}),Au=Mo({name:"TRACKING",pattern:/TRACKING/i,longer_alt:Ic,categories:[lc,Ic]}),mu=Mo({name:"THEN",pattern:/THEN/i,longer_alt:Ic,categories:[lc,Ic]}),gu=Mo({name:"TYPEOF",pattern:/TYPEOF/i,longer_alt:Ic,categories:[lc,Ic]}),Lu=Mo({name:"VIEW",pattern:/VIEW/i,longer_alt:Ic,categories:[lc,Ic]}),Nu=Mo({name:"VIEWSTAT",pattern:/VIEWSTAT/i,longer_alt:Ic,categories:[lc,Ic]}),Su=Mo({name:"WHEN",pattern:/WHEN/i,longer_alt:Ic,categories:[lc,Ic]}),_u=Mo({name:"SECURITY_ENFORCED",pattern:/SECURITY_ENFORCED/i,longer_alt:Ic,categories:[lc,Ic]}),Ou=Mo({name:"SYSTEM_MODE",pattern:/SYSTEM_MODE/i,longer_alt:Ic,categories:[lc,Ic]}),Ru=Mo({name:"USER_MODE",pattern:/USER_MODE/i,longer_alt:Ic,categories:[lc,Ic]}),yu=Mo({name:"CALENDAR_MONTH",pattern:/CALENDAR_MONTH/i,longer_alt:Ic,categories:[cc,Ic]}),vu=Mo({name:"CALENDAR_QUARTER",pattern:/CALENDAR_QUARTER/i,longer_alt:Ic,categories:[cc,Ic]}),Iu=Mo({name:"CALENDAR_YEAR",pattern:/CALENDAR_YEAR/i,longer_alt:Ic,categories:[cc,Ic]}),Cu=Mo({name:"DAY_IN_MONTH",pattern:/DAY_IN_MONTH/i,longer_alt:Ic,categories:[cc,Ic]}),xu=Mo({name:"DAY_IN_WEEK",pattern:/DAY_IN_WEEK/i,longer_alt:Ic,categories:[cc,Ic]}),Uu=Mo({name:"DAY_IN_YEAR",pattern:/DAY_IN_YEAR/i,longer_alt:Ic,categories:[cc,Ic]}),bu=Mo({name:"DAY_ONLY",pattern:/DAY_ONLY/i,longer_alt:Ic,categories:[cc,Ic]}),Mu=Mo({name:"FISCAL_MONTH",pattern:/FISCAL_MONTH/i,longer_alt:Ic,categories:[cc,Ic]}),ku=Mo({name:"FISCAL_QUARTER",pattern:/FISCAL_QUARTER/i,longer_alt:Ic,categories:[cc,Ic]}),Pu=Mo({name:"FISCAL_YEAR",pattern:/FISCAL_YEAR/i,longer_alt:Ic,categories:[cc,Ic]}),Fu=Mo({name:"HOUR_IN_DAY",pattern:/HOUR_IN_DAY/i,longer_alt:Ic,categories:[cc,Ic]}),wu=Mo({name:"WEEK_IN_MONTH",pattern:/WEEK_IN_MONTH/i,longer_alt:Ic,categories:[cc,Ic]}),Bu=Mo({name:"WEEK_IN_YEAR",pattern:/WEEK_IN_YEAR/i,longer_alt:Ic,categories:[cc,Ic]}),Du=Mo({name:"AVG",pattern:/AVG/i,longer_alt:Ic,categories:[uc,Ic]}),$u=Mo({name:"COUNT",pattern:/COUNT/i,longer_alt:Ic,categories:[uc,Ic]}),ju=Mo({name:"COUNT_DISTINCT",pattern:/COUNT_DISTINCT/i,longer_alt:Ic,categories:[uc,Ic]}),Gu=Mo({name:"MIN",pattern:/MIN/i,longer_alt:Ic,categories:[uc,Ic]}),Vu=Mo({name:"MAX",pattern:/MAX/i,longer_alt:Ic,categories:[uc,Ic]}),Yu=Mo({name:"SUM",pattern:/SUM/i,longer_alt:Ic,categories:[uc,Ic]}),Wu=Mo({name:"DISTANCE",pattern:/DISTANCE/i,longer_alt:Ic,categories:[hc,Ic]}),Hu=Mo({name:"GEOLOCATION",pattern:/GEOLOCATION/i,longer_alt:Ic,categories:[hc,Ic]}),Ku=Mo({name:"FIELDS",pattern:/FIELDS/i,longer_alt:Ic,categories:[pc,Ic]}),Xu=Mo({name:"FORMAT",pattern:/FORMAT/i,longer_alt:Ic,categories:[dc,Ic]}),zu=Mo({name:"toLabel",pattern:/TOLABEL/i,longer_alt:Ic,categories:[dc,Ic]}),Qu=Mo({name:"convertTimezone",pattern:/CONVERTTIMEZONE/i,longer_alt:Ic,categories:[dc,Ic]}),qu=Mo({name:"convertCurrency",pattern:/CONVERTCURRENCY/i,longer_alt:Ic,categories:[dc,Ic]}),Zu=Mo({name:"GROUPING",pattern:/GROUPING/i,longer_alt:Ic,categories:[dc,Ic]}),Ju=Mo({name:"ALL",pattern:/ALL/i,longer_alt:Ic,categories:[fc,Ic]}),eh=Mo({name:"CUSTOM",pattern:/CUSTOM/i,longer_alt:Ic,categories:[fc,Ic]}),th=Mo({name:"STANDARD",pattern:/STANDARD/i,longer_alt:Ic,categories:[fc,Ic]}),rh=Mo({name:"YESTERDAY",pattern:/YESTERDAY/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),ih=Mo({name:"TODAY",pattern:/TODAY/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),nh=Mo({name:"TOMORROW",pattern:/TOMORROW/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),ah=Mo({name:"LAST_WEEK",pattern:/LAST_WEEK/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),sh=Mo({name:"THIS_WEEK",pattern:/THIS_WEEK/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),oh=Mo({name:"NEXT_WEEK",pattern:/NEXT_WEEK/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),lh=Mo({name:"LAST_MONTH",pattern:/LAST_MONTH/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),ch=Mo({name:"THIS_MONTH",pattern:/THIS_MONTH/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),uh=Mo({name:"NEXT_MONTH",pattern:/NEXT_MONTH/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),hh=Mo({name:"LAST_90_DAYS",pattern:/LAST_90_DAYS/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),ph=Mo({name:"NEXT_90_DAYS",pattern:/NEXT_90_DAYS/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),fh=Mo({name:"THIS_QUARTER",pattern:/THIS_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),dh=Mo({name:"LAST_QUARTER",pattern:/LAST_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Eh=Mo({name:"NEXT_QUARTER",pattern:/NEXT_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Th=Mo({name:"THIS_YEAR",pattern:/THIS_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Ah=Mo({name:"LAST_YEAR",pattern:/LAST_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),mh=Mo({name:"NEXT_YEAR",pattern:/NEXT_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),gh=Mo({name:"THIS_FISCAL_QUARTER",pattern:/THIS_FISCAL_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Lh=Mo({name:"LAST_FISCAL_QUARTER",pattern:/LAST_FISCAL_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Nh=Mo({name:"NEXT_FISCAL_QUARTER",pattern:/NEXT_FISCAL_QUARTER/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Sh=Mo({name:"THIS_FISCAL_YEAR",pattern:/THIS_FISCAL_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),_h=Mo({name:"LAST_FISCAL_YEAR",pattern:/LAST_FISCAL_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Oh=Mo({name:"NEXT_FISCAL_YEAR",pattern:/NEXT_FISCAL_YEAR/i,longer_alt:Ic,categories:[Ec,Ic,Tc]}),Rh=Mo({name:"NEXT_N_DAYS",pattern:/NEXT_N_DAYS/i,longer_alt:Ic,categories:[Ac,Ic]}),yh=Mo({name:"LAST_N_DAYS",pattern:/LAST_N_DAYS/i,longer_alt:Ic,categories:[Ac,Ic]}),vh=Mo({name:"N_DAYS_AGO",pattern:/N_DAYS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),Ih=Mo({name:"NEXT_N_WEEKS",pattern:/NEXT_N_WEEKS/i,longer_alt:Ic,categories:[Ac,Ic]}),Ch=Mo({name:"LAST_N_WEEKS",pattern:/LAST_N_WEEKS/i,longer_alt:Ic,categories:[Ac,Ic]}),xh=Mo({name:"N_WEEKS_AGO",pattern:/N_WEEKS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),Uh=Mo({name:"NEXT_N_MONTHS",pattern:/NEXT_N_MONTHS/i,longer_alt:Ic,categories:[Ac,Ic]}),bh=Mo({name:"LAST_N_MONTHS",pattern:/LAST_N_MONTHS/i,longer_alt:Ic,categories:[Ac,Ic]}),Mh=Mo({name:"N_MONTHS_AGO",pattern:/N_MONTHS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),kh=Mo({name:"NEXT_N_QUARTERS",pattern:/NEXT_N_QUARTERS/i,longer_alt:Ic,categories:[Ac,Ic]}),Ph=Mo({name:"LAST_N_QUARTERS",pattern:/LAST_N_QUARTERS/i,longer_alt:Ic,categories:[Ac,Ic]}),Fh=Mo({name:"N_QUARTERS_AGO",pattern:/N_QUARTERS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),wh=Mo({name:"NEXT_N_YEARS",pattern:/NEXT_N_YEARS/i,longer_alt:Ic,categories:[Ac,Ic]}),Bh=Mo({name:"LAST_N_YEARS",pattern:/LAST_N_YEARS/i,longer_alt:Ic,categories:[Ac,Ic]}),Dh=Mo({name:"N_YEARS_AGO",pattern:/N_YEARS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),$h=Mo({name:"NEXT_N_FISCAL_QUARTERS",pattern:/NEXT_N_FISCAL_QUARTERS/i,longer_alt:Ic,categories:[Ac,Ic]}),jh=Mo({name:"LAST_N_FISCAL_QUARTERS",pattern:/LAST_N_FISCAL_QUARTERS/i,longer_alt:Ic,categories:[Ac,Ic]}),Gh=Mo({name:"N_FISCAL_QUARTERS_AGO",pattern:/N_FISCAL_QUARTERS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),Vh=Mo({name:"NEXT_N_FISCAL_YEARS",pattern:/NEXT_N_FISCAL_YEARS/i,longer_alt:Ic,categories:[Ac,Ic]}),Yh=Mo({name:"LAST_N_FISCAL_YEARS",pattern:/LAST_N_FISCAL_YEARS/i,longer_alt:Ic,categories:[Ac,Ic]}),Wh=Mo({name:"N_FISCAL_YEARS_AGO",pattern:/N_FISCAL_YEARS_AGO/i,longer_alt:Ic,categories:[Ac,Ic]}),Hh=Mo({name:"EQUAL",pattern:"=",categories:[mc]}),Kh=Mo({name:"NOT_EQUAL",pattern:/!=|<>/,categories:[mc]}),Xh=Mo({name:"LESS_THAN",pattern:"<",categories:[mc]}),zh=Mo({name:"LESS_THAN_OR_EQUAL",pattern:"<=",categories:[mc]}),Qh=Mo({name:"GREATER_THAN",pattern:">",categories:[mc]}),qh=Mo({name:"GREATER_THAN_OR_EQUAL",pattern:">=",categories:[mc]}),Zh=Mo({name:"DECIMAL",pattern:".",categories:[gc]}),Jh=Mo({name:"COLON",pattern:":",categories:[gc]}),ep=Mo({name:"SEMICOLON",pattern:";",categories:[gc]}),tp=Mo({name:"COMMA",pattern:",",categories:[gc]}),rp=Mo({name:"ASTERISK",pattern:"*",categories:[gc]}),ip=Mo({name:"L_PAREN",pattern:"(",categories:[gc]}),np=Mo({name:"R_PAREN",pattern:")",categories:[gc]}),ap=Mo({name:"L_SQUARE_BRACKET",pattern:"[",categories:[gc]}),sp=Mo({name:"R_SQUARE_BRACKET",pattern:"]",categories:[gc]}),op=Mo({name:"PLUS",pattern:"+",categories:[gc]}),lp=Mo({name:"MINUS",pattern:"-",categories:[gc]}),cp=Mo({name:"DATETIME",pattern:/[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?(\Z|\.[0-9]+Z|\+[0-9]{2}:[0-9]{2}|\-[0-9]{2}:[0-9]{2}|\+[0-9]{4}|\-[0-9]{4})/i,categories:[Lc]}),up=Mo({name:"DATE",pattern:/[0-9]{4}-[0-9]{2}-[0-9]{2}/,categories:[Lc]}),hp=Mo({name:"CURRENCY_PREFIXED_DECIMAL",pattern:/[a-zA-Z]{3}[0-9]+\.\d+/,longer_alt:Ic,categories:[Sc]}),pp=Mo({name:"SIGNED_DECIMAL",pattern:/(\-|\+)[0-9]*\.\d+/,categories:[Nc,Sc]}),fp=Mo({name:"UNSIGNED_DECIMAL",pattern:/[0-9]*\.\d+/,categories:[Nc,Sc]}),dp=Mo({name:"CURRENCY_PREFIXED_INTEGER",pattern:/[a-zA-Z]{3}-?[0-9]+/,longer_alt:Ic,categories:[Sc,Ic]}),Ep=Mo({name:"SIGNED_INTEGER",pattern:/(\-|\+)[0-9]+/,categories:[Nc,_c]}),Tp=Mo({name:"GEOLOCATION_UNIT",pattern:/'(mi|km)'/i,longer_alt:Ic,categories:[Ic]}),Ap=Mo({name:"UNSIGNED_INTEGER",pattern:/0|[1-9]\d*/,categories:[Nc,_c]}),mp=Mo({name:"Delegated",pattern:/DELEGATED/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["D","d"]}),gp=Mo({name:"Everything",pattern:/EVERYTHING/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["E","e"]}),Lp=Mo({name:"MineAndMyGroups",pattern:/MINEANDMYGROUPS/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["M","m"]}),Np=Mo({name:"Mine",pattern:/MINE/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["M","m"]}),Sp=Mo({name:"MyTerritory",pattern:/MY_TERRITORY/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["M","m"]}),_p=Mo({name:"MyTeamTerritory",pattern:/MY_TEAM_TERRITORY/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["M","m"]}),Op=Mo({name:"Team",pattern:/TEAM/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["T","t"]}),Rp=Mo({name:"AllPrivate",pattern:/ALLPRIVATE/i,longer_alt:Ic,categories:[Rc,Ic],start_chars_hint:["A","a"]}),yp=[xc,Uc,kc,bc,Pc,Fc,Mc,wc,Bc,Dc,$c,jc,Zu,Gc,Vc,Wc,Kc,Xc,qc,Qc,Jc,eu,tu,ru,iu,nu,su,mp,gp,Lp,Np,Sp,_p,Op,Rp,lu,ou,cu,uu,hu,pu,fu,du,Eu,Tu,Au,mu,gu,Nu,Lu,Su,_u,Ou,Ru,yu,vu,Iu,Cu,xu,Uu,bu,Mu,ku,Pu,Fu,wu,Bu,Du,ju,$u,Gu,Vu,Yu,Wu,Hu,Ku,Xu,zu,Qu,qu,rh,ih,nh,ah,sh,oh,lh,ch,uh,hh,ph,fh,dh,Eh,Th,Ah,mh,gh,Lh,Nh,Sh,_h,Oh,Rh,yh,vh,Ih,Ch,xh,Uh,bh,Mh,kh,Ph,Fh,wh,Bh,Dh,$h,jh,Gh,Vh,Yh,Wh,Tp,Ju,eh,th,Yc,au,Zc,Hc,zc,hp,dp,Cc,Ic,cp,up,pp,fp,Ap,Ep,Hh,Kh,zh,Xh,qh,Qh,Zh,Jh,ep,tp,rp,ip,np,ap,sp,op,lp],vp=new No(yp,{ensureOptimizations:!0,skipValidations:!1});var Ip=class extends Error{constructor(e){super(`${e.message} (${e.line}:${e.column})`),this.name="LexingError"}},Cp=class extends Error{constructor(e){super(e.message),this.name=e.name}},xp=class extends sc{constructor({ignoreParseErrors:e}={ignoreParseErrors:!1}){super(yp,{skipValidations:!1,recoveryEnabled:!!e}),this.$_dateFunctionOr=void 0,this.$_aggregateFunction=void 0,this.$_otherFunction=void 0,this.$_atomicExpression=void 0,this.$_apexBindVariableExpression=void 0,this.$_arrayExpression=void 0,this.$_relationalOperator=void 0,this.$_selectClause=void 0,this.$_selectClauseFunctionIdentifier=void 0,this.$_withDataCategoryArr=void 0,this.allowApexBindVariables=!1,this.ignoreParseErrors=!1,this.selectStatement=this.RULE("selectStatement",()=>{this.SUBRULE(this.selectClause),this.SUBRULE(this.fromClause),this.SUBRULE(this.clauseStatements)}),this.selectStatementPartial=this.RULE("selectStatementPartial",()=>{this.OPTION(()=>{this.SUBRULE(this.selectClause)}),this.OPTION1(()=>{this.SUBRULE(this.fromClause)}),this.SUBRULE(this.clauseStatements)}),this.clauseStatements=this.RULE("clauseStatements",()=>{this.OPTION(()=>{this.SUBRULE(this.usingScopeClause)}),this.OPTION1(()=>{this.SUBRULE(this.whereClause)}),this.OPTION2(()=>{this.MANY({DEF:()=>{this.SUBRULE(this.withClause)}})}),this.OPTION3(()=>{this.SUBRULE(this.groupByClause),this.OPTION4(()=>{this.SUBRULE(this.havingClause)})}),this.OPTION5(()=>{this.SUBRULE(this.orderByClause)}),this.OPTION6(()=>{this.SUBRULE(this.limitClause)}),this.OPTION7(()=>{this.SUBRULE(this.offsetClause)}),this.OPTION8(()=>{this.SUBRULE(this.forViewOrReference)}),this.OPTION9(()=>{this.SUBRULE(this.updateTrackingViewstat)})}),this.selectClause=this.RULE("selectClause",()=>{this.CONSUME(eu),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.OR(this.$_selectClause||(this.$_selectClause=[{ALT:()=>this.SUBRULE(this.selectClauseFunctionIdentifier,{LABEL:"field"})},{ALT:()=>this.SUBRULE(this.selectClauseSubqueryIdentifier,{LABEL:"field"})},{ALT:()=>this.SUBRULE(this.selectClauseTypeOf,{LABEL:"field"})},{ALT:()=>this.SUBRULE(this.selectClauseIdentifier,{LABEL:"field"})}]))}})},{resyncEnabled:!1}),this.selectClauseFunctionIdentifier=this.RULE("selectClauseFunctionIdentifier",()=>{this.OR(this.$_selectClauseFunctionIdentifier||(this.$_selectClauseFunctionIdentifier=[{ALT:()=>this.SUBRULE(this.dateFunction,{LABEL:"fn"})},{ALT:()=>this.SUBRULE(this.aggregateFunction,{LABEL:"fn"})},{ALT:()=>this.SUBRULE(this.locationFunction,{LABEL:"fn"})},{ALT:()=>this.SUBRULE(this.fieldsFunction,{LABEL:"fn"})},{ALT:()=>this.SUBRULE(this.otherFunction,{LABEL:"fn"})}])),this.OPTION(()=>this.CONSUME(Ic,{LABEL:"alias"}))},{resyncEnabled:!1}),this.selectClauseSubqueryIdentifier=this.RULE("selectClauseSubqueryIdentifier",()=>{this.CONSUME(ip),this.SUBRULE(this.selectStatement),this.CONSUME(np)},{resyncEnabled:!1}),this.selectClauseTypeOf=this.RULE("selectClauseTypeOf",()=>{this.CONSUME(gu),this.CONSUME(Ic,{LABEL:"typeOfField"}),this.AT_LEAST_ONE({DEF:()=>{this.SUBRULE(this.selectClauseTypeOfThen)}}),this.OPTION(()=>{this.SUBRULE(this.selectClauseTypeOfElse)}),this.CONSUME(fu)},{resyncEnabled:!1}),this.selectClauseIdentifier=this.RULE("selectClauseIdentifier",()=>{this.CONSUME(Ic,{LABEL:"field"}),this.OPTION(()=>this.CONSUME1(Ic,{LABEL:"alias"}))},{resyncEnabled:!1}),this.selectClauseTypeOfThen=this.RULE("selectClauseTypeOfThen",()=>{this.CONSUME(Su),this.CONSUME(Ic,{LABEL:"typeOfField"}),this.CONSUME(mu),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.CONSUME1(Ic,{LABEL:"field"})}})},{resyncEnabled:!1}),this.selectClauseTypeOfElse=this.RULE("selectClauseTypeOfElse",()=>{this.CONSUME(wc),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.CONSUME(Ic,{LABEL:"field"})}})},{resyncEnabled:!1}),this.fromClause=this.RULE("fromClause",()=>{this.CONSUME(jc),this.CONSUME(Ic),this.OPTION({GATE:()=>!(this.LA(1).tokenType===du&&this.LA(2).tokenType===Ap),DEF:()=>this.CONSUME1(Ic,{LABEL:"alias"})})},{resyncEnabled:!1}),this.usingScopeClause=this.RULE("usingScopeClause",()=>{this.CONSUME(ru),this.CONSUME(Tu),this.CONSUME(Rc)}),this.whereClause=this.RULE("whereClause",()=>{this.CONSUME(iu);let e=this.getParenCount();this.AT_LEAST_ONE({DEF:()=>{this.SUBRULE(this.conditionExpression,{ARGS:[e,!0,!0]})}}),this.$_checkBalancedParens(e)}),this.whereClauseSubqueryIdentifier=this.RULE("whereClauseSubqueryIdentifier",()=>{this.CONSUME(ip),this.SUBRULE(this.selectStatement),this.CONSUME(np)}),this.conditionExpression=this.RULE("conditionExpression",(e,t,r)=>{e=this.getParenCount(e),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Uc,{LABEL:"logicalOperator"})},{ALT:()=>this.CONSUME(Zc,{LABEL:"logicalOperator"})}])}),this.MANY({MAX_LOOKAHEAD:10,DEF:()=>this.SUBRULE(this.expressionPartWithNegation,{ARGS:[e],LABEL:"expressionNegation"})}),this.OR1({MAX_LOOKAHEAD:10,DEF:[{ALT:()=>this.SUBRULE(this.expression,{ARGS:[e,!1,t,r]})}]})}),this.withClause=this.RULE("withClause",()=>{this.CONSUME(nu),this.OR([{ALT:()=>this.CONSUME(_u,{LABEL:"withSecurityEnforced"})},{ALT:()=>this.CONSUME(Ru,{LABEL:"withAccessLevel"})},{ALT:()=>this.CONSUME(Ou,{LABEL:"withAccessLevel"})},{ALT:()=>this.SUBRULE(this.withDataCategory)}])}),this.withDataCategory=this.RULE("withDataCategory",()=>{this.CONSUME(pu),this.AT_LEAST_ONE_SEP({SEP:Uc,DEF:()=>{this.SUBRULE(this.withDataCategoryArr)}})}),this.withDataCategoryArr=this.RULE("withDataCategoryArr",()=>{this.CONSUME(Ic,{LABEL:"dataCategoryGroupName"}),this.OR(this.$_withDataCategoryArr||(this.$_withDataCategoryArr=[{ALT:()=>this.CONSUME(uu,{LABEL:"filteringSelector"})},{ALT:()=>this.CONSUME(ou,{LABEL:"filteringSelector"})},{ALT:()=>this.CONSUME(hu,{LABEL:"filteringSelector"})},{ALT:()=>this.CONSUME(lu,{LABEL:"filteringSelector"})}])),this.OPTION(()=>{this.CONSUME1(ip)}),this.AT_LEAST_ONE_SEP1({SEP:tp,DEF:()=>{this.CONSUME1(Ic,{LABEL:"dataCategoryName"})}}),this.OPTION1(()=>{this.CONSUME2(np)})}),this.groupByClause=this.RULE("groupByClause",()=>{this.CONSUME(Gc),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.OR([{ALT:()=>this.SUBRULE(this.cubeFunction,{LABEL:"groupBy"})},{ALT:()=>this.SUBRULE(this.rollupFunction,{LABEL:"groupBy"})},{ALT:()=>this.SUBRULE(this.dateFunction,{LABEL:"groupBy"})},{ALT:()=>this.CONSUME(Ic,{LABEL:"groupBy"})}])}})}),this.havingClause=this.RULE("havingClause",()=>{this.CONSUME(Vc);let e=this.getParenCount();this.AT_LEAST_ONE({DEF:()=>{this.SUBRULE(this.conditionExpression,{ARGS:[e,!0,!1]})}}),this.$_checkBalancedParens(e)}),this.orderByClause=this.RULE("orderByClause",()=>{this.CONSUME(Pc),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.OR([{ALT:()=>this.SUBRULE(this.orderByGroupingFunctionExpression,{LABEL:"orderByExpressionOrFn"})},{ALT:()=>this.SUBRULE(this.orderBySpecialFunctionExpression,{LABEL:"orderByExpressionOrFn"})},{ALT:()=>this.SUBRULE(this.orderByExpression,{LABEL:"orderByExpressionOrFn"})}])}})}),this.orderByExpression=this.RULE("orderByExpression",()=>{this.CONSUME(Ic),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(kc,{LABEL:"order"})},{ALT:()=>this.CONSUME(Mc,{LABEL:"order"})}])}),this.OPTION1(()=>{this.CONSUME(qc),this.OR1([{ALT:()=>this.CONSUME($c,{LABEL:"nulls"})},{ALT:()=>this.CONSUME(Hc,{LABEL:"nulls"})}])})}),this.orderByGroupingFunctionExpression=this.RULE("orderByGroupingFunctionExpression",()=>{this.CONSUME(Zu,{LABEL:"fn"}),this.SUBRULE(this.functionExpression)}),this.orderBySpecialFunctionExpression=this.RULE("orderBySpecialFunctionExpression",()=>{this.OR([{ALT:()=>this.SUBRULE(this.aggregateFunction)},{ALT:()=>this.SUBRULE(this.dateFunction)},{ALT:()=>this.SUBRULE(this.locationFunction)}]),this.OPTION(()=>{this.OR1([{ALT:()=>this.CONSUME(kc,{LABEL:"order"})},{ALT:()=>this.CONSUME(Mc,{LABEL:"order"})}])}),this.OPTION1(()=>{this.CONSUME(qc),this.OR2([{ALT:()=>this.CONSUME($c,{LABEL:"nulls"})},{ALT:()=>this.CONSUME(Hc,{LABEL:"nulls"})}])})}),this.limitClause=this.RULE("limitClause",()=>{this.CONSUME(Xc),this.CONSUME(Ap,{LABEL:"value"})}),this.offsetClause=this.RULE("offsetClause",()=>{this.CONSUME(du),this.CONSUME(Ap,{LABEL:"value"})}),this.dateFunction=this.RULE("dateFunction",()=>{this.OR(this.$_dateFunctionOr||(this.$_dateFunctionOr=[{ALT:()=>this.CONSUME(yu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(vu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Iu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Cu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(xu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Uu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(bu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Mu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(ku,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Pu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Fu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(wu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Bu,{LABEL:"fn"})}])),this.SUBRULE(this.functionExpression)}),this.aggregateFunction=this.RULE("aggregateFunction",()=>{this.OR(this.$_aggregateFunction||(this.$_aggregateFunction=[{ALT:()=>this.CONSUME(Du,{LABEL:"fn"})},{ALT:()=>this.CONSUME($u,{LABEL:"fn"})},{ALT:()=>this.CONSUME(ju,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Gu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Vu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Yu,{LABEL:"fn"})}])),this.SUBRULE(this.functionExpression,{ARGS:[!0]})}),this.fieldsFunction=this.RULE("fieldsFunction",()=>{this.CONSUME(Ku,{LABEL:"fn"}),this.CONSUME(ip),this.CONSUME(fc,{LABEL:"params"}),this.CONSUME(np)}),this.otherFunction=this.RULE("otherFunction",()=>{this.OR(this.$_otherFunction||(this.$_otherFunction=[{ALT:()=>this.CONSUME(Xu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(zu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Qu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(qu,{LABEL:"fn"})},{ALT:()=>this.CONSUME(Zu,{LABEL:"fn"})}])),this.SUBRULE(this.functionExpression)}),this.cubeFunction=this.RULE("cubeFunction",()=>{this.CONSUME(Fc,{LABEL:"fn"}),this.SUBRULE(this.functionExpression)}),this.rollupFunction=this.RULE("rollupFunction",()=>{this.CONSUME(Jc,{LABEL:"fn"}),this.SUBRULE(this.functionExpression)}),this.functionExpression=this.RULE("functionExpression",e=>{this.CONSUME(ip),this.MANY_SEP({SEP:tp,DEF:()=>{this.OR([{GATE:()=>!e,ALT:()=>this.SUBRULE(this.aggregateFunction,{LABEL:"params"})},{ALT:()=>this.SUBRULE(this.otherFunction,{LABEL:"params"})},{ALT:()=>this.CONSUME(Cc,{LABEL:"params"})},{ALT:()=>this.CONSUME(Nc,{LABEL:"params"})},{ALT:()=>this.CONSUME(Ic,{LABEL:"params"})}])}}),this.CONSUME(np)}),this.locationFunction=this.RULE("locationFunction",()=>{this.CONSUME(Wu),this.CONSUME(ip),this.CONSUME(Ic,{LABEL:"location1"}),this.CONSUME(tp),this.OR([{ALT:()=>this.SUBRULE(this.geolocationFunction,{LABEL:"location2"})},{ALT:()=>this.CONSUME1(Ic,{LABEL:"location2"})}]),this.CONSUME1(tp),this.CONSUME(Tp,{LABEL:"unit"}),this.CONSUME(np)}),this.geolocationFunction=this.RULE("geolocationFunction",()=>{this.CONSUME(Hu),this.CONSUME(ip),this.CONSUME(Nc,{LABEL:"latitude"}),this.CONSUME(tp),this.CONSUME1(Nc,{LABEL:"longitude"}),this.CONSUME(np)}),this.expressionPartWithNegation=this.RULE("expressionPartWithNegation",e=>{let t=0;this.MANY(()=>{this.CONSUME(ip),t++}),this.CONSUME(zc,{LABEL:"expressionNegation"}),e&&t&&(e.left+=t)}),this.expression=this.RULE("expression",(e,t,r,i)=>{this.OPTION1(()=>{this.MANY1(()=>{this.CONSUME(ip),e&&e.left++})}),this.OR1([{GATE:()=>!!r,ALT:()=>this.SUBRULE(this.aggregateFunction,{LABEL:"lhs"})},{GATE:()=>!!i,ALT:()=>this.SUBRULE(this.locationFunction,{LABEL:"lhs"})},{ALT:()=>this.SUBRULE(this.dateFunction,{LABEL:"lhs"})},{ALT:()=>this.SUBRULE(this.otherFunction,{LABEL:"lhs"})},{ALT:()=>this.CONSUME(Ic,{LABEL:"lhs"})}]),this.OR2([{ALT:()=>this.SUBRULE(this.expressionWithRelationalOperator,{LABEL:"operator"})},{ALT:()=>this.SUBRULE(this.expressionWithSetOperator,{LABEL:"operator",ARGS:[t]})}]),this.OPTION3(()=>{this.MANY2({GATE:()=>!e||e.left>e.right,DEF:()=>{this.CONSUME(np),e&&e.right++}})})}),this.expressionWithRelationalOperator=this.RULE("expressionWithRelationalOperator",()=>{this.SUBRULE(this.relationalOperator),this.SUBRULE(this.atomicExpression,{LABEL:"rhs"})}),this.expressionWithSetOperator=this.RULE("expressionWithSetOperator",e=>{this.SUBRULE(this.setOperator),this.SUBRULE2(this.atomicExpression,{LABEL:"rhs",ARGS:[!0,e]})}),this.atomicExpression=this.RULE("atomicExpression",(e,t)=>{this.OR(this.$_atomicExpression||(this.$_atomicExpression=[{GATE:()=>this.allowApexBindVariables,ALT:()=>this.SUBRULE(this.apexBindVariableExpression)},{GATE:()=>e,ALT:()=>this.SUBRULE(this.arrayExpression)},{GATE:()=>e&&t,ALT:()=>this.SUBRULE(this.whereClauseSubqueryIdentifier)},{GATE:()=>!e,ALT:()=>this.CONSUME(Lc)},{GATE:()=>!e,ALT:()=>this.CONSUME(hp,{LABEL:"CurrencyPrefixedDecimal"})},{GATE:()=>!e,ALT:()=>this.CONSUME(dp,{LABEL:"CurrencyPrefixedInteger"})},{GATE:()=>!e,ALT:()=>this.CONSUME(Nc)},{GATE:()=>!e,ALT:()=>this.CONSUME(Qc)},{GATE:()=>!e,ALT:()=>this.SUBRULE(this.booleanValue)},{GATE:()=>!e,ALT:()=>this.CONSUME(Ec)},{GATE:()=>!e,ALT:()=>this.SUBRULE(this.dateNLiteral)},{GATE:()=>!e,ALT:()=>this.CONSUME(Tp,{LABEL:"StringIdentifier"})},{GATE:()=>!e,ALT:()=>this.CONSUME(Cc)}]))}),this.apexBindVariableExpression=this.RULE("apexBindVariableExpression",()=>{this.CONSUME(Jh),this.OPTION(()=>{this.SUBRULE(this.apexBindVariableNewInstantiation,{LABEL:"apex"}),this.OPTION1(()=>{this.CONSUME(Zh)})}),this.MANY_SEP({SEP:Zh,DEF:()=>{this.OR(this.$_apexBindVariableExpression||(this.$_apexBindVariableExpression=[{ALT:()=>this.SUBRULE(this.apexBindVariableFunctionCall,{LABEL:"apex"})},{ALT:()=>this.SUBRULE(this.apexBindVariableIdentifier,{LABEL:"apex"})}]))}})}),this.apexBindVariableIdentifier=this.RULE("apexBindVariableIdentifier",()=>{this.CONSUME(Ic),this.OPTION(()=>this.SUBRULE(this.apexBindVariableFunctionArrayAccessor))}),this.apexBindVariableNewInstantiation=this.RULE("apexBindVariableNewInstantiation",()=>{this.CONSUME(cu,{LABEL:"new"}),this.CONSUME(Ic,{LABEL:"function"}),this.OPTION(()=>{this.SUBRULE(this.apexBindVariableGeneric)}),this.SUBRULE(this.apexBindVariableFunctionParams),this.OPTION1(()=>this.SUBRULE(this.apexBindVariableFunctionArrayAccessor))}),this.apexBindVariableFunctionCall=this.RULE("apexBindVariableFunctionCall",()=>{this.CONSUME(Ic,{LABEL:"function"}),this.SUBRULE(this.apexBindVariableFunctionParams),this.OPTION(()=>this.SUBRULE(this.apexBindVariableFunctionArrayAccessor))}),this.apexBindVariableGeneric=this.RULE("apexBindVariableGeneric",()=>{this.CONSUME(Xh),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.CONSUME(Ic,{LABEL:"parameter"})}}),this.CONSUME(Qh)}),this.apexBindVariableFunctionParams=this.RULE("apexBindVariableFunctionParams",()=>{this.CONSUME(ip),this.MANY_SEP({SEP:tp,DEF:()=>{this.CONSUME(Ic,{LABEL:"parameter"})}}),this.CONSUME(np)}),this.apexBindVariableFunctionArrayAccessor=this.RULE("apexBindVariableFunctionArrayAccessor",()=>{this.CONSUME(ap),this.OR([{ALT:()=>this.CONSUME(Ap,{LABEL:"value"})},{ALT:()=>this.CONSUME(Ic,{LABEL:"value"})}]),this.CONSUME(sp)}),this.arrayExpression=this.RULE("arrayExpression",()=>{this.CONSUME(ip),this.AT_LEAST_ONE_SEP({SEP:tp,DEF:()=>{this.OR(this.$_arrayExpression||(this.$_arrayExpression=[{ALT:()=>this.CONSUME(hp,{LABEL:"value"})},{ALT:()=>this.CONSUME(dp,{LABEL:"value"})},{ALT:()=>this.CONSUME(Nc,{LABEL:"value"})},{ALT:()=>this.CONSUME(Lc,{LABEL:"value"})},{ALT:()=>this.CONSUME(Qc,{LABEL:"value"})},{ALT:()=>this.CONSUME(tu,{LABEL:"value"})},{ALT:()=>this.CONSUME(Dc,{LABEL:"value"})},{ALT:()=>this.CONSUME(Ec,{LABEL:"value"})},{ALT:()=>this.SUBRULE(this.dateNLiteral,{LABEL:"value"})},{ALT:()=>this.CONSUME(Tp,{LABEL:"value"})},{ALT:()=>this.CONSUME(Cc,{LABEL:"value"})}]))}}),this.CONSUME(np)}),this.relationalOperator=this.RULE("relationalOperator",()=>{this.OR(this.$_relationalOperator||(this.$_relationalOperator=[{ALT:()=>this.CONSUME(Hh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Kh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Qh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(qh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Xh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(zh,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Kc,{LABEL:"operator"})}]))}),this.setOperator=this.RULE("setOperator",()=>{this.OR([{ALT:()=>this.CONSUME(Yc,{LABEL:"operator"})},{ALT:()=>this.SUBRULE(this.notInOperator,{LABEL:"notIn"})},{ALT:()=>this.CONSUME(Wc,{LABEL:"operator"})},{ALT:()=>this.CONSUME(Bc,{LABEL:"operator"})}])}),this.notInOperator=this.RULE("notInOperator",()=>{this.CONSUME(zc,{LABEL:"operator"}),this.CONSUME(Yc,{LABEL:"operator"})}),this.booleanValue=this.RULE("booleanValue",()=>{this.OR([{ALT:()=>this.CONSUME(tu,{LABEL:"boolean"})},{ALT:()=>this.CONSUME(Dc,{LABEL:"boolean"})}])}),this.dateNLiteral=this.RULE("dateNLiteral",()=>{this.CONSUME(Ac,{LABEL:"dateNLiteral"}),this.CONSUME(Jh),this.OR1([{ALT:()=>this.CONSUME(Ap,{LABEL:"variable"})},{ALT:()=>this.CONSUME(Ep,{LABEL:"variable"})}])}),this.forViewOrReference=this.RULE("forViewOrReference",()=>{this.CONSUME(au),this.OR([{ALT:()=>this.CONSUME(Lu,{LABEL:"value"})},{ALT:()=>this.CONSUME(Eu,{LABEL:"value"})},{ALT:()=>this.CONSUME(su,{LABEL:"value"})}])}),this.updateTrackingViewstat=this.RULE("updateTrackingViewstat",()=>{this.CONSUME(su),this.OR([{ALT:()=>this.CONSUME(Au,{LABEL:"value"})},{ALT:()=>this.CONSUME(Nu,{LABEL:"value"})}])}),this.ignoreParseErrors=!!e,this.performSelfAnalysis()}$_checkBalancedParens(e){!this.RECORDING_PHASE&&e&&e.left-e.right!==0&&this.CONSUME(yc,{ERR_MSG:"Expecting a token type of --\x3e RParen <-- but found --\x3e '' <--"})}getParenCount(e){return e||{right:0,left:0}}},Up=new xp;function bp(e,t){let r,{allowApexBindVariables:i,logErrors:n,ignoreParseErrors:a,allowPartialQuery:s}=t||{allowApexBindVariables:!1,logErrors:!1,ignoreParseErrors:!1},o=function(e){return vp.tokenize(e)}(e);if(o.errors.length>0)throw n&&(console.log("Lexing Errors:"),console.log(o.errors)),new Ip(o.errors[0]);if(Up.ignoreParseErrors!==a&&(Up=new xp({ignoreParseErrors:a})),Up.input=o.tokens,Up.allowApexBindVariables=i||!1,r=s?Up.selectStatementPartial():Up.selectStatement(),Up.errors.length>0&&(n&&(console.log("Parsing Errors:"),console.log(Up.errors)),!a))throw new Cp(Up.errors[0]);return{cst:r,parseErrors:Up.errors.map(e=>new Cp(e))}}var Mp=(new xp).getBaseCstVisitorConstructor(),kp=["TRUE","FALSE"],Pp=["YESTERDAY","TODAY","TOMORROW","LAST_WEEK","THIS_WEEK","NEXT_WEEK","LAST_MONTH","THIS_MONTH","NEXT_MONTH","LAST_90_DAYS","NEXT_90_DAYS","THIS_QUARTER","LAST_QUARTER","NEXT_QUARTER","THIS_YEAR","LAST_YEAR","NEXT_YEAR","THIS_FISCAL_QUARTER","LAST_FISCAL_QUARTER","NEXT_FISCAL_QUARTER","THIS_FISCAL_YEAR","LAST_FISCAL_YEAR","NEXT_FISCAL_YEAR"],Fp=["NEXT_N_DAYS","LAST_N_DAYS","N_DAYS_AGO","NEXT_N_WEEKS","LAST_N_WEEKS","N_WEEKS_AGO","NEXT_N_MONTHS","LAST_N_MONTHS","N_MONTHS_AGO","NEXT_N_QUARTERS","LAST_N_QUARTERS","N_QUARTERS_AGO","NEXT_N_YEARS","LAST_N_YEARS","N_YEARS_AGO","NEXT_N_FISCAL_QUARTERS","LAST_N_FISCAL_QUARTERS","N_FISCAL_QUARTERS_AGO","NEXT_N_FISCAL_YEARS","LAST_N_FISCAL_YEARS","N_FISCAL_YEARS_AGO"],wp=new class extends Mp{constructor(){super(),this.helpers={$_getFieldFunction:(e,t=!1,r=!0)=>{let i=e.functionExpression?e.functionExpression.map(e=>this.visit(e,{includeType:r})).flat():[],n={};return r&&(n.type="FieldFunctionExpression"),n.functionName=e.fn[0].tokenType.name,n.parameters=i,r&&t&&(n.isAggregateFn=t),n.rawValue=`${e.fn[0].image}(${i.map(e=>"string"==typeof e?e:e.rawValue).join(", ")})`,n},$_getLiteralTypeFromTokenType:e=>"REAL_NUMBER"===e?"DECIMAL":"CURRENCY_PREFIXED_DECIMAL"===e?"DECIMAL_WITH_CURRENCY_PREFIX":"CURRENCY_PREFIXED_INTEGER"===e?"INTEGER_WITH_CURRENCY_PREFIX":"SIGNED_DECIMAL"===e||"UNSIGNED_DECIMAL"===e?"DECIMAL":"UNSIGNED_INTEGER"===e||"SIGNED_INTEGER"===e?"INTEGER":"DATETIME"===e?"DATETIME":"DATE"===e?"DATE":"NULL"===e?"NULL":"StringIdentifier"===e||"Identifier"===e?"STRING":kp.includes(e)?"BOOLEAN":Pp.includes(e)?"DATE_LITERAL":Fp.includes(e)?"DATE_N_LITERAL":"STRING",$_parseSelect(e,t){let{isSubquery:r}=t||{isSubquery:!1},i={};if(e.selectClause&&(i.fields=this.visit(e.selectClause)),e.fromClause)if(r){let{sObject:t,alias:r,sObjectPrefix:n}=this.visit(e.fromClause);i.relationshipName=t,r&&(i.sObjectAlias=r),n&&(i.sObjectPrefix=n)}else{let{sObject:t,alias:r}=this.visit(e.fromClause);i.sObject=t,r&&(i.sObjectAlias=r)}return Array.isArray(i.fields)&&i.sObjectAlias&&i.fields.forEach(e=>{e.relationships&&e.relationships[0]===i.sObjectAlias&&(e.relationships=e.relationships.slice(1),e.objectPrefix=i.sObjectAlias),e.relationships&&0===e.relationships.length&&(delete e.relationships,e.type="Field")}),i={...i,...this.visit(e.clauseStatements)},i}},this.validateVisitor()}selectStatement(e,t){return this.helpers.$_parseSelect.bind(this)(e,t)}selectStatementPartial(e,t){return this.helpers.$_parseSelect.bind(this)(e,t)}clauseStatements(e){let t={};return e.usingScopeClause&&!e.usingScopeClause[0].recoveredNode&&(t.usingScope=this.visit(e.usingScopeClause)),e.whereClause&&!e.whereClause[0].recoveredNode&&(t.where=this.visit(e.whereClause)),e.withClause&&e.withClause.filter(e=>!e.recoveredNode).forEach(e=>{let{withSecurityEnforced:r,withAccessLevel:i,withDataCategory:n}=this.visit(e);r&&(t.withSecurityEnforced=r),i&&(t.withAccessLevel=i),n&&(t.withDataCategory=n)}),e.groupByClause&&!e.groupByClause[0].recoveredNode&&(t.groupBy=this.visit(e.groupByClause)),e.havingClause&&!e.havingClause[0].recoveredNode&&(t.having=this.visit(e.havingClause)),e.orderByClause&&!e.orderByClause[0].recoveredNode&&(t.orderBy=this.visit(e.orderByClause)),e.limitClause&&!e.limitClause[0].recoveredNode&&(t.limit=Number(this.visit(e.limitClause))),e.offsetClause&&!e.offsetClause[0].recoveredNode&&(t.offset=Number(this.visit(e.offsetClause))),e.forViewOrReference&&!e.forViewOrReference[0].recoveredNode&&(t.for=this.visit(e.forViewOrReference)),e.updateTrackingViewstat&&!e.updateTrackingViewstat[0].recoveredNode&&(t.update=this.visit(e.updateTrackingViewstat)),t}selectClause(e){return e.field?e.field.map(e=>{if(i(e)){let t,r=e.image;if(r.includes(".")){let e=r.split(".");t={type:"FieldRelationship",field:e[e.length-1],relationships:e.slice(0,e.length-1),rawValue:r}}else t={type:"Field",field:r};return t}return this.visit(e)}):[]}selectClauseFunctionIdentifier(e){let t={...this.visit(e.fn)};return e.alias&&(t.alias=e.alias[0].image),t}selectClauseSubqueryIdentifier(e){return{type:"FieldSubquery",subquery:this.visit(e.selectStatement,{isSubquery:!0})}}selectClauseTypeOf(e){let t=e.selectClauseTypeOfThen.map(e=>this.visit(e));return e.selectClauseTypeOfElse&&t.push(this.visit(e.selectClauseTypeOfElse)),{type:"FieldTypeof",field:e.typeOfField[0].image,conditions:t}}selectClauseIdentifier(e){let t,r=e.field[0],i=e.alias?e.alias[0].image:void 0,n=r.image;if(n.includes(".")){let e=n.split(".");t={type:"FieldRelationship",field:e[e.length-1],relationships:e.slice(0,e.length-1),rawValue:n}}else t={type:"Field",field:n};return i&&(t.alias=i),t}selectClauseTypeOfThen(e){return{type:"WHEN",objectType:e.typeOfField[0].image,fieldList:e.field.map(e=>e.image)}}selectClauseTypeOfElse(e){return{type:"ELSE",fieldList:e.field.map(e=>e.image)}}fromClause(e){let t,r=e.Identifier[0].image;if(r.includes(".")){let e=r.split(".");t={sObjectPrefix:e.slice(0,e.length-1),sObject:e[e.length-1]}}else t={sObject:r};return e.alias&&e.alias[0]&&(t.alias=e.alias[0].image),t}usingScopeClause(e){return e.UsingScopeEnumeration[0].image}whereClauseSubqueryIdentifier(e){return this.visit(e.selectStatement,{isSubquery:!1})}whereClause(e){return e.conditionExpression.reduce((e,t)=>{let r;e.expressionTree?(r=this.visit(t,{prevExpression:e.prevExpression}),e.prevExpression.right=r):(r=this.visit(t),e.expressionTree=r);let i=r.right,n=r.right;for(;p(n);)i=n,n=n.right;return e.prevExpression=n||r,e},{prevExpression:void 0,expressionTree:void 0}).expressionTree}conditionExpression(e,t){(t=t||{}).prevExpression&&e.logicalOperator&&(t.prevExpression.operator=e.logicalOperator[0].tokenType.name);let r={},i=r;if(Array.isArray(e.expressionNegation))if(1===e.expressionNegation.length)r=this.visit(e.expressionNegation),i=r.right;else{r=this.visit(e.expressionNegation[0]);let t=r;e.expressionNegation.slice(1).forEach(e=>{t.right=this.visit(e),i=t.right.right})}return i.left=this.visit(e.expression),r}withClause(e){return e.withSecurityEnforced?{withSecurityEnforced:!0}:e.withAccessLevel?{withAccessLevel:e.withAccessLevel[0].image}:{withDataCategory:{conditions:this.visit(e.withDataCategory)}}}withDataCategory(e){return e.withDataCategoryArr.map(e=>this.visit(e))}withDataCategoryArr(e){return{groupName:e.dataCategoryGroupName[0].image,selector:e.filteringSelector[0].image,parameters:e.dataCategoryName.map(e=>e.image)}}groupByClause(e){return e.groupBy.map(e=>i(e)?{field:e.image}:{fn:this.visit(e,{includeType:!1})})}havingClause(e){return e.conditionExpression.reduce((e,t)=>(e.expressionTree?(e.prevExpression.right=this.visit(t,{prevExpression:e.prevExpression}),e.prevExpression=e.prevExpression.right):(e.expressionTree=this.visit(t),e.prevExpression=e.expressionTree),e),{prevExpression:void 0,expressionTree:void 0}).expressionTree}orderByClause(e){return e.orderByExpressionOrFn.map(e=>this.visit(e))}orderByExpression(e){let t={field:e.Identifier[0].image};return e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t}orderByGroupingFunctionExpression(e){let t={fn:this.helpers.$_getFieldFunction(e,!1,!1)};return e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t}orderBySpecialFunctionExpression(e){let t={};return e.aggregateFunction?t.fn=this.visit(e.aggregateFunction,{includeType:!1}):e.dateFunction?t.fn=this.visit(e.dateFunction,{includeType:!1}):e.locationFunction&&(t.fn=this.visit(e.locationFunction,{includeType:!1})),e.order&&e.order[0]&&(t.order=e.order[0].tokenType.name),e.nulls&&e.nulls[0]&&(t.nulls=e.nulls[0].tokenType.name),t}limitClause(e){return e.value[0].image}offsetClause(e){return e.value[0].image}dateFunction(e,t={includeType:!0}){return this.helpers.$_getFieldFunction(e,!0,t.includeType)}aggregateFunction(e,t={includeType:!0}){return this.helpers.$_getFieldFunction(e,!0,t.includeType)}fieldsFunction(e,t={includeType:!0}){let r={};return t.includeType&&(r.type="FieldFunctionExpression"),r={...r,functionName:"FIELDS",parameters:[e.params[0].image]},r.rawValue=`FIELDS(${r.parameters[0]})`,r}otherFunction(e,t={includeType:!0}){return this.helpers.$_getFieldFunction(e,!1,t.includeType)}cubeFunction(e){return this.helpers.$_getFieldFunction(e,!1,!1)}rollupFunction(e){return this.helpers.$_getFieldFunction(e,!1,!1)}locationFunction(e,t={includeType:!0}){let r={};return t.includeType&&(r.type="FieldFunctionExpression"),r={...r,functionName:"DISTANCE",parameters:[e.location1[0].image,i(e.location2)?e.location2[0].image:this.visit(e.location2,t),e.unit[0].image]},t.includeType&&(r.isAggregateFn=!0),r.rawValue=`DISTANCE(${r.parameters[0]}, ${n(r.parameters[1])?r.parameters[1]:r.parameters[1].rawValue}, ${r.parameters[2]})`,r}geolocationFunction(e,t={includeType:!0}){let r={};return t.includeType&&(r.type="FieldFunctionExpression"),r={...r,functionName:"GEOLOCATION",parameters:[e.latitude[0].image,e.longitude[0].image],rawValue:`GEOLOCATION(${e.latitude[0].image}, ${e.longitude[0].image})`},r}functionExpression(e,t={includeType:!0}){return e.params?e.params.map(e=>e.image?e.image:this.visit(e,t)):[]}expression(e){let{value:t,literalType:r,dateLiteralVariable:n,operator:a}=this.visit(e.operator,{returnLiteralType:!0}),s={};return i(e.lhs)?s.field=e.lhs[0].image:s.fn=this.visit(e.lhs,{includeType:!1}),s.operator=a,s.literalType=r,"SUBQUERY"===r?s.valueQuery=t:s.value=t,n&&(s.dateLiteralVariable=n),e.L_PAREN&&(s.openParen=e.L_PAREN.length),e.R_PAREN&&(s.closeParen=e.R_PAREN.length),s}expressionPartWithNegation(e){return{left:e.L_PAREN?{openParen:e.L_PAREN.length}:null,operator:"NOT",right:{left:{}}}}expressionWithRelationalOperator(e){return e.relationalOperator?{operator:this.visit(e.relationalOperator),...this.visit(e.rhs,{returnLiteralType:!0})}:{operator:this.visit(e.setOperator),...this.visit(e.rhs,{returnLiteralType:!0})}}expressionWithSetOperator(e){return e.relationalOperator?{operator:this.visit(e.relationalOperator),...this.visit(e.rhs,{returnLiteralType:!0})}:{operator:this.visit(e.setOperator),...this.visit(e.rhs,{returnLiteralType:!0})}}atomicExpression(e,t){let r,i,n;if(t=t||{},e.apexBindVariableExpression)r=this.visit(e.apexBindVariableExpression),i="APEX_BIND_VARIABLE";else if(e.NumberIdentifier)r=e.NumberIdentifier[0].image,i=this.helpers.$_getLiteralTypeFromTokenType(e.NumberIdentifier[0].tokenType.name);else if(e.UnsignedInteger)r=e.UnsignedInteger[0].image,i="INTEGER";else if(e.SignedInteger)r=e.SignedInteger[0].image,i="INTEGER";else if(e.RealNumber)r=e.RealNumber[0].image,i="DECIMAL";else if(e.DateIdentifier)r=e.DateIdentifier[0].image,i=this.helpers.$_getLiteralTypeFromTokenType(e.DateIdentifier[0].tokenType.name);else if(e.CurrencyPrefixedInteger)r=e.CurrencyPrefixedInteger[0].image,i="INTEGER_WITH_CURRENCY_PREFIX";else if(e.CurrencyPrefixedDecimal)r=e.CurrencyPrefixedDecimal[0].image,i="DECIMAL_WITH_CURRENCY_PREFIX";else if(e.DateTime)r=e.DateTime[0].image,i="DATETIME";else if(e.date)r=e.DateToken[0].image,i="DATE";else if(e.NULL)r="NULL",i="NULL";else if(e.StringIdentifier)r=e.StringIdentifier[0].image,i="STRING";else if(e.Identifier)r=e.Identifier[0].image,i="STRING";else if(e.booleanValue)r=this.visit(e.booleanValue),i="BOOLEAN";else if(e.DateLiteral)r=e.DateLiteral[0].image,i="DATE_LITERAL";else if(e.dateNLiteral){let t=this.visit(e.dateNLiteral);r=t.value,n=t.variable,i="DATE_N_LITERAL"}else if(e.arrayExpression){let t=this.visit(e.arrayExpression);r=t.map(e=>e.value);let a=t.map(e=>e.variable||null),s=a.some(e=>null!==e);i=1===new Set(t.map(e=>e.type)).size?this.helpers.$_getLiteralTypeFromTokenType(t[0].type):t.map(e=>this.helpers.$_getLiteralTypeFromTokenType(e.type)),s&&(n=a),i=i||"STRING"}else e.whereClauseSubqueryIdentifier&&(r=this.visit(e.whereClauseSubqueryIdentifier),i="SUBQUERY");return t.returnLiteralType?{value:r,literalType:i,dateLiteralVariable:n}:r}apexBindVariableExpression(e){return e.apex.map(e=>this.visit(e)).join(".")}apexBindVariableIdentifier(e){let t=e.Identifier[0].image;return e.apexBindVariableFunctionArrayAccessor&&(t+=this.visit(e.apexBindVariableFunctionArrayAccessor[0])),t}apexBindVariableNewInstantiation(e){let t=`new ${e.function[0].image}`;return e.apexBindVariableGeneric&&(t+=this.visit(e.apexBindVariableGeneric[0])),t+=this.visit(e.apexBindVariableFunctionParams[0]),e.apexBindVariableFunctionArrayAccessor&&(t+=this.visit(e.apexBindVariableFunctionArrayAccessor[0])),t}apexBindVariableFunctionCall(e){let t=`${e.function[0].image}${this.visit(e.apexBindVariableFunctionParams[0])}`;return e.apexBindVariableFunctionArrayAccessor&&(t+=this.visit(e.apexBindVariableFunctionArrayAccessor[0])),t}apexBindVariableGeneric(e){return`<${e.parameter.map(e=>e.image).join(", ")}>`}apexBindVariableFunctionParams(e){return`(${(Array.isArray(e.parameter)?e.parameter:[]).map(e=>e.image).join(", ")})`}apexBindVariableFunctionArrayAccessor(e){return`[${e.value[0].image}]`}arrayExpression(e){return e.value.map(e=>i(e)?{type:e.tokenType.name,value:e.image}:this.visit(e,{includeType:!0}))}relationalOperator(e){return e.operator[0].image}setOperator(e){return Array.isArray(e.operator)?e.operator[0].tokenType.name.replace("_"," "):Array.isArray(e.notIn)?this.visit(e.notIn):void 0}notInOperator(e){return"NOT IN"}booleanValue(e){return e.boolean[0].tokenType.name}dateNLiteral(e,t){let r={value:`${e.dateNLiteral[0].image}:${e.variable[0].image}`,variable:Number(e.variable[0].image)};return t&&t.includeType&&(r.type=e.dateNLiteral[0].tokenType.name),r}forViewOrReference(e){return e.value[0].tokenType.name}updateTrackingViewstat(e){return e.value[0].tokenType.name}};function Bp(e,t){let{cst:r}=bp(e,t);return wp.visit(r)}function Dp(e){if("string"==typeof e)return{type:"Field",field:e};if(function(e){return!s(e.functionName||e.fn)}(e)){let t=[];return e.parameters&&(t=Array.isArray(e.parameters)?e.parameters:[e.parameters]),{type:"FieldFunctionExpression",functionName:e.functionName||e.fn,parameters:t,alias:e.alias}}if(function(e){return n(e.field)&&Array.isArray(e.relationships)}(e))return{type:"FieldRelationship",field:e.field,relationships:e.relationships,objectPrefix:e.objectPrefix};if(function(e){return!s(e.subquery)}(e))return{type:"FieldSubquery",subquery:e.subquery};if(function(e){return n(e.field)&&Array.isArray(e.conditions)}(e))return{type:"FieldTypeof",field:e.field,conditions:e.conditions};if(function(e){return n(e.field)&&!Array.isArray(e.relationships)&&!Array.isArray(e.conditions)}(e))return{type:"Field",field:e.field,objectPrefix:e.objectPrefix};throw new TypeError("The input object provided did not match any valid field types")}function $p(e,t){if(!e)return[];let r=(e=h(e)?e.subquery:e).fields;if(!r)return[];let i={};e.groupBy&&(i=(Array.isArray(e.groupBy)?e.groupBy:[e.groupBy]).reduce((e,t)=>(_(t)&&(e[t.field.toLocaleLowerCase()]=t.field),e),{}));let a=-1,s=(u(e)?e.relationshipName:e.sObject||"").toLowerCase(),o=(e.sObjectAlias||"").toLowerCase();return r.flatMap(e=>{switch(e.type){case"Field":return e.alias||e.field;case"FieldFunctionExpression":{let r=l(e);if(r=r.map(e=>{if(e.includes(".")){let t=e.split("."),r=t[0].toLowerCase();return(r===o||r===s)&&(t=t.slice(1)),t.join(".")}return e}),e.alias&&(e.isAggregateFn||t))return e.alias;if(e.alias){let t=r[0];return t.includes(".")?(r=t.split(".").slice(0,-1),r.push(e.alias),r.join(".")):e.alias}return e.isAggregateFn||function(e){if(!e.parameters||0===e.parameters.length)return!1;let t=e.parameters[0];return!n(t)&&!!t.isAggregateFn}(e)||t?(a++,`expr${a}`):r.length>0?r.join("."):e.functionName}case"FieldRelationship":{let t=e.relationships[0].toLowerCase();return c(e)?e.alias:e.rawValue&&i[e.rawValue.toLocaleLowerCase()]?e.field:t===o||t===s?e.relationships.concat([e.field]).slice(1).join("."):e.relationships.concat([e.field]).join(".")}case"FieldSubquery":return e.subquery.relationshipName;case"FieldTypeof":{let t=new Set,r=[];return e.conditions.forEach(i=>{i.fieldList.forEach(i=>{t.has(i)||(t.add(i),r.push(`${e.field}.${i}`))})}),r}}}).filter(e=>n(e))}var jp=class{constructor(e,t){this.currIndent=1,this.enabled=e,this.options={numIndent:t.numIndent??1,fieldMaxLineLength:t.fieldMaxLineLength??60,fieldSubqueryParensOnOwnLine:t.fieldSubqueryParensOnOwnLine??!0,whereClauseOperatorsIndented:!0,newLineAfterKeywords:t.newLineAfterKeywords??!1,logging:t.logging??!1},this.options.newLineAfterKeywords&&(this.options.fieldSubqueryParensOnOwnLine=!0)}log(e){this.options.logging&&console.log(e)}getIndent(e=0){return this.repeatChar((this.currIndent+e)*(this.options.numIndent||1),"\t")}repeatChar(e,t){return new Array(e).fill(t).join("")}setSubquery(e){this.currIndent=e?this.currIndent+=1:this.currIndent-=1}stepCurrIndex(e){this.currIndent+=e}formatFields(e){function t(t){e.fields[t-1]&&(e.fields[t-1].suffix=e.fields[t-1].suffix.trim())}if(e.fields.forEach((t,r)=>{t.suffix=e.fields.length-1===r?"":", "}),this.enabled){let r=0,i=!1;e.fields.forEach((n,s)=>{n.isSubquery?(t(s),n.prefix=`\n${this.getIndent()}`,n.suffix=e.fields.length-1===s?"":", ",r=0,i=!0):Array.isArray(n.typeOfClause)?(t(s),n.prefix=`\n${this.getIndent()}`,i=!0):a(this.options.fieldMaxLineLength)&&(r+=n.text.length+n.suffix.length,(r>this.options.fieldMaxLineLength||i)&&(t(s),(!this.options.newLineAfterKeywords||s>0)&&(n.prefix+=`\n${this.getIndent()}`),r=0,i=!1)),this.log(n)})}}formatTyeOfField(e,t){return this.enabled&&this.options.newLineAfterKeywords?t.map((e,r)=>0===r?e:r===t.length-1?`${this.getIndent()}${e}`:`${this.getIndent()}\t${e}`).join("\n"):e}formatTypeofFieldCondition(e){let t="",r=e.fieldList.join(", ");if(this.enabled&&this.options.newLineAfterKeywords){let i=this.getIndent();t=`${e.type}`,e.objectType?t+=`\n${i}\t\t${e.objectType}\n${i}\tTHEN\n${i}\t\t${r}`:t+=`\n${i}\t\t${r}`}else t=e.type,e.objectType?t+=` ${e.objectType} THEN ${r}`:t+=` ${r}`;return t}formatSubquery(e,t=2,r=!1){r&&t++;let i="(",n=")";return this.enabled&&(this.options.fieldSubqueryParensOnOwnLine||this.options.newLineAfterKeywords?(e=e.replace(/\n/g,`\n${this.repeatChar(t,"\t")}`),i=`(\n${this.repeatChar(t,"\t")}`,n=`\n${this.repeatChar(t-1,"\t")})`):e=e.replace(/\n/g,"\n\t")),`${i}${e}${n}`}formatClause(e){return this.enabled?this.options.newLineAfterKeywords?`\n${e}\n\t`:`\n${e}`:` ${e}`}formatText(e){return this.enabled&&(this.options.newLineAfterKeywords||e.startsWith("\n"))?e:` ${e}`}formatWithIndent(e){return this.enabled?`${this.getIndent()}${e}`:e}formatOrderByArray(e){if(this.enabled){let t=0,r="";return e.forEach((i,n)=>{let a=e[n+1];t+=i.length,a&&(t+a.length>(this.options.fieldMaxLineLength||0)||this.options.newLineAfterKeywords)?(r+=`${i},\n\t`,t=0):r+=`${i}${a?", ":""}`}),r}return e.join(", ")}formatParens(e,t,r=!1){let i="";if(a(e)&&e>0)if(this.enabled)if("("===t){for(let t=0;t<e;t++)r&&t===e-1?i+="(":0===t?i+="(\n":(this.currIndent++,i+=`${this.getIndent()}(\n`);(!r||e>1)&&this.currIndent++}else for(let n=e-1;n>=0;n--)r&&n===e-1?i+=")":(this.currIndent--,i+=`\n${this.getIndent()})`);else i+=function(e,t,r=""){return a(e)&&e>0?new Array(e).fill(t).join(r):""}(e,t);return i}formatWhereClauseOperators(e,t,r=0){let i="NOT"===e;return this.enabled&&!i?`\n${this.getIndent(r)}${e} ${t}`:`${i?"":" "}${e} ${t}`}formatAddNewLine(e=" ",t){return this.enabled&&!t?"\n":e}};function Gp(e,t={}){if(!e)return"";(t=t||{}).format=!!t.format,t.logging&&(console.time("composer"),console.log("Composing Query:",e),console.log("Format output:",t.format));let r=new Vp(e,t).query;return t.logging&&console.timeEnd("composer"),r}var Vp=class{constructor(e,t={}){this.soql=e,this.logging=!1,this.format=!1,t={autoCompose:!0,...t};let{logging:r,format:i}=t;this.logging=!!r,this.format=!!i,this.query="",this.formatter=new jp(this.format,{logging:this.logging,...t.formatOptions}),t.autoCompose&&this.start()}start(){this.query=this.parseQuery(this.soql)}log(e){this.logging&&console.log("Current SOQL:",e)}parseFn(e){let t;return e.rawValue?t=e.rawValue:(t=e.functionName,t+=`(${(e.parameters||[]).map(e=>n(e)?e:this.parseFn(e)).join(", ")})`),e.alias&&(t+=` ${e.alias}`),t}parseQuery(e){let t={fields:this.parseFields(e.fields||[]).map(e=>({text:e.text,typeOfClause:e.typeOfClause,isSubquery:e.text.startsWith("("),prefix:"",suffix:""})),isSubquery:u(e),lineBreaks:[]},r="";e.fields&&(r+=this.formatter.formatClause("SELECT").trimStart()),this.formatter.formatFields(t);let i="";if(t.fields.forEach(e=>{Array.isArray(e.typeOfClause)?i+=`${e.prefix}${this.formatter.formatTyeOfField(e.text,e.typeOfClause)}${e.suffix}`:i+=`${e.prefix}${e.text}${e.suffix}`}),r+=this.formatter.formatText(i),(u(e)?e.relationshipName:e.sObject)&&(r+=this.formatter.formatClause("FROM")),u(e)){let t=e.sObjectPrefix||[];t.push(e.relationshipName),r+=this.formatter.formatText(`${t.join(".")}${o(e.sObjectAlias,""," ")}`)}else e.sObject&&(r+=this.formatter.formatText(`${e.sObject}${o(e.sObjectAlias,""," ")}`));return this.log(r),e.usingScope&&(r+=this.formatter.formatClause("USING SCOPE"),r+=this.formatter.formatText(e.usingScope),this.log(r)),e.where&&(r+=this.formatter.formatClause("WHERE"),r+=this.formatter.formatText(this.parseWhereOrHavingClause(e.where)),this.log(r)),e.groupBy&&(r+=this.formatter.formatClause("GROUP BY"),r+=this.formatter.formatText(this.parseGroupByClause(e.groupBy)),this.log(r),e.having&&(r+=this.formatter.formatClause("HAVING"),r+=this.formatter.formatText(this.parseWhereOrHavingClause(e.having)),this.log(r))),e.orderBy&&(!Array.isArray(e.orderBy)||e.orderBy.length>0)&&(r+=this.formatter.formatClause("ORDER BY"),r+=this.formatter.formatText(this.parseOrderBy(e.orderBy)),this.log(r)),a(e.limit)&&(r+=this.formatter.formatClause("LIMIT"),r+=this.formatter.formatText(`${e.limit}`),this.log(r)),a(e.offset)&&(r+=this.formatter.formatClause("OFFSET"),r+=this.formatter.formatText(`${e.offset}`),this.log(r)),e.withDataCategory&&(r+=this.formatter.formatClause("WITH DATA CATEGORY"),r+=this.formatter.formatText(this.parseWithDataCategory(e.withDataCategory)),this.log(r)),e.withSecurityEnforced&&(r+=this.formatter.formatClause("WITH SECURITY_ENFORCED"),this.log(r)),e.withAccessLevel&&(r+=this.formatter.formatClause(`WITH ${e.withAccessLevel}`),this.log(r)),e.for&&(r+=this.formatter.formatClause("FOR"),r+=this.formatter.formatText(e.for),this.log(r)),e.update&&(r+=this.formatter.formatClause("UPDATE"),r+=this.formatter.formatText(e.update),this.log(r)),r.trim()}parseFields(e){return e.map(e=>{let t,r="",i=e.objectPrefix?`${e.objectPrefix}.`:"";switch(e.type){case"Field":r=`${i}${e.field}${e.alias?` ${e.alias}`:""}`;break;case"FieldFunctionExpression":{let t="";e.parameters&&(t=e.parameters.map(e=>n(e)?e:this.parseFields([e]).map(e=>e.text)).join(", ")),r=`${e.functionName}(${t})${e.alias?` ${e.alias}`:""}`;break}case"FieldRelationship":r=`${i}${e.relationships.join(".")}.${e.field}${c(e)?` ${e.alias}`:""}`;break;case"FieldSubquery":r=this.formatter.formatSubquery(this.parseQuery(e.subquery));break;case"FieldTypeof":t=this.parseTypeOfField(e),r=t.join(" ")}return{text:r,typeOfClause:t}})}parseTypeOfField(e){let t=[`TYPEOF ${e.field}`].concat(e.conditions.map(e=>this.formatter.formatTypeofFieldCondition(e)));return t.push("END"),t}parseWhereOrHavingClause(e,t=0,r=!1){let i="",n=e.left,a=!1;if(n&&(i+=this.formatter.formatParens(n.openParen,"(",g(n)),!g(n))){t=t+(n.openParen||0)-(n.closeParen||0),r&&t++;let e="";e+=m(n)?this.parseFn(n.fn):n.field,e+=` ${n.operator} `,L(n)?e+=this.formatter.formatSubquery(this.parseQuery(n.valueQuery),1,!0):e+=function(e,t=!1){return Array.isArray(e)?e.length>0?`(${e.join(", ")})`:t?"()":"":t?`(${e||""})`:e||""}(R(n.value,n.literalType,n.operator)),i+=this.formatter.formatWithIndent(e),i+=this.formatter.formatParens(n.closeParen,")",r)}if(d(e)){let r=o(e.operator);a="NOT"===r;let s=this.formatter.formatWhereClauseOperators(r,this.parseWhereOrHavingClause(e.right,t,g(n)),t);return`${a?i.trimRight():i}${s}`.trim()}return i.trim()}parseGroupByClause(e){return(Array.isArray(e)?e:[e]).map(e=>_(e)?e.field:this.parseFn(e.fn)).join(", ")}parseOrderBy(e){if(Array.isArray(e))return this.formatter.formatOrderByArray(e.map(e=>this.parseOrderBy(e)));{let t="";return N(e)?t=`${o(e.field," ")}`:t+=`${this.parseFn(e.fn)} `,t+=`${o(e.order," ")}${o(e.nulls,"","NULLS ")}`,t.trim()}}parseWithDataCategory(e){return e.conditions.map(e=>{let t=e.parameters.length>1?`(${e.parameters.join(", ")})`:`${e.parameters.join(", ")}`;return`${e.groupName} ${e.selector} ${t}`}).join(" AND ")}}}}]);